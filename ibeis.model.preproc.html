<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ibeis.model.preproc package &mdash; ibeis 0.1.0.dev1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0.dev1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ibeis 0.1.0.dev1 documentation" href="index.html" />
    <link rel="up" title="ibeis.model package" href="ibeis.model.html" />
    <link rel="next" title="ibeis.tests package" href="ibeis.tests.html" />
    <link rel="prev" title="ibeis.model.hots.smk package" href="ibeis.model.hots.smk.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ibeis.tests.html" title="ibeis.tests package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ibeis.model.hots.smk.html" title="ibeis.model.hots.smk package"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ibeis 0.1.0.dev1 documentation</a> &raquo;</li>
          <li><a href="ibeis.html" >ibeis package</a> &raquo;</li>
          <li><a href="ibeis.model.html" accesskey="U">ibeis.model package</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="ibeis-model-preproc-package">
<h1>ibeis.model.preproc package<a class="headerlink" href="#ibeis-model-preproc-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ibeis.model.preproc.preproc_annot">
<span id="ibeis-model-preproc-preproc-annot-module"></span><h2>ibeis.model.preproc.preproc_annot module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_annot" title="Permalink to this headline">¶</a></h2>
<p>The goal of this module is to offload annotation work from the controller into a
single place.</p>
<p>CommandLine Help for manual controller functions</p>
<p># Cross platform alias helper
python -c &#8220;import utool as ut; ut.write_to(&#8216;Tgen.sh&#8217;, &#8216;python -m ibeis.control.template_generator $&#64;&#8217;)&#8221;</p>
<p>Tgen.sh &#8211;tbls annotations &#8211;Tcfg with_getters:True strip_docstr:False with_columns:False
Tgen.sh &#8211;tbls annotations &#8211;Tcfg with_getters:True with_native:True strip_docstr:True
Tgen.sh &#8211;tbls annotations &#8211;Tcfg with_getters:True strip_docstr:True with_columns:False &#8211;quiet
Tgen.sh &#8211;tbls annotations &#8211;Tcfg with_getters:True strip_docstr:False with_columns:False</p>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.distinguish_unknown_nids">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">distinguish_unknown_nids</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>nid_list_</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#distinguish_unknown_nids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.distinguish_unknown_nids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.generate_annot_properties">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">generate_annot_properties</tt><big>(</big><em>ibs</em>, <em>gid_list</em>, <em>bbox_list=None</em>, <em>theta_list=None</em>, <em>species_list=None</em>, <em>nid_list=None</em>, <em>name_list=None</em>, <em>detect_confidence_list=None</em>, <em>notes_list=None</em>, <em>vert_list=None</em>, <em>annot_uuid_list=None</em>, <em>viewpoint_list=None</em>, <em>quiet_delete_thumbs=False</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#generate_annot_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.generate_annot_properties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.make_annot_semantic_uuid">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">make_annot_semantic_uuid</tt><big>(</big><em>semantic_infotup</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#make_annot_semantic_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.make_annot_semantic_uuid" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>semantic_infotup</strong> (<em>tuple</em>) &#8211; (image_uuid_list, verts_list, theta_list, view_list, name_list, species_list)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">annot_semantic_uuid_list</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_annot</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">testdata_preproc_annot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">semantic_infotup</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_semantic_uuid_info</span><span class="p">(</span><span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">annot_semantic_uuid_list</span> <span class="o">=</span> <span class="n">make_annot_semantic_uuid</span><span class="p">(</span><span class="n">semantic_infotup</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">annot_semantic_uuid_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">215ab5f9-fe53-d7d1-59b8-d6b5ce7e6ca6</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.make_annot_visual_uuid">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">make_annot_visual_uuid</tt><big>(</big><em>visual_infotup</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#make_annot_visual_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.make_annot_visual_uuid" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>visual_infotup</strong> (<em>tuple</em>) &#8211; (image_uuid_list, verts_list, theta_list)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">annot_visual_uuid_list</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_annot</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">testdata_preproc_annot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">visual_infotup</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_visual_uuid_info</span><span class="p">(</span><span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">annot_visual_uuid_list</span> <span class="o">=</span> <span class="n">make_annot_visual_uuid</span><span class="p">(</span><span class="n">visual_infotup</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">annot_visual_uuid_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">8687dcb6-1f1f-fdd3-8b72-8f36f9f41905</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.make_annotation_uuids">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">make_annotation_uuids</tt><big>(</big><em>image_uuid_list</em>, <em>bbox_list</em>, <em>theta_list</em>, <em>deterministic=True</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#make_annotation_uuids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.make_annotation_uuids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.on_delete">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">on_delete</tt><big>(</big><em>ibs</em>, <em>aid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#on_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.on_delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.postget_annot_verts">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">postget_annot_verts</tt><big>(</big><em>vertstr_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#postget_annot_verts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.postget_annot_verts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.test_annotation_uuid">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">test_annotation_uuid</tt><big>(</big><em>ibs</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#test_annotation_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.test_annotation_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Consistency test</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_annot.testdata_preproc_annot">
<tt class="descclassname">ibeis.model.preproc.preproc_annot.</tt><tt class="descname">testdata_preproc_annot</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_annot.html#testdata_preproc_annot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_annot.testdata_preproc_annot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_chip">
<span id="ibeis-model-preproc-preproc-chip-module"></span><h2>ibeis.model.preproc.preproc_chip module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_chip" title="Permalink to this headline">¶</a></h2>
<p>Preprocess Chips</p>
<p>Extracts annotation chips from imaages and applies optional image
normalizations.</p>
<dl class="docutils">
<dt>TODO:</dt>
<dd><ul class="first last simple">
<li>Have controller delete cached chip_fpath if there is a cache miss.</li>
<li>Implemented funcs based on custom qparams in non None <cite>qreq_</cite> objects</li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.add_annot_chips_params_gen">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">add_annot_chips_params_gen</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#add_annot_chips_params_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.add_annot_chips_params_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapped function wrp_noexectb(add_annot_chips_params_gen)</p>
<p>orig_argspec = ArgSpec(args=[&#8216;ibs&#8217;, &#8216;aid_list&#8217;, &#8216;<a href="#id1"><span class="problematic" id="id2">qreq_</span></a>&#8216;], varargs=None, keywords=None, defaults=(None,))</p>
<p>orig_docstr = Computes parameters for SQLController</p>
<blockquote>
<div><p>computes chips if they do not exist.
generates values for add_annot_chips sqlcommands</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>ibs (IBEISController):
aid_list (list):
<a href="#id3"><span class="problematic" id="id4">qreq_</span></a> (QueryRequest):</dd>
<dt>Example:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params_iter</span> <span class="o">=</span> <span class="n">add_annot_chips_params_gen</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">params_iter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">aid</span><span class="p">,</span> <span class="n">chip_config_rowid</span><span class="p">,</span> <span class="n">cfpath</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,)</span> <span class="o">=</span> <span class="n">params_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fname</span> <span class="o">=</span> <span class="n">basename</span><span class="p">(</span><span class="n">cfpath</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">(&#39;chip_aid=1_bbox=(0,0,1047,715)_theta=0.0_gid=1_CHIP(sz450).png&#39;, 545, 372)</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.compute_and_write_chips">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">compute_and_write_chips</tt><big>(</big><em>ibs</em>, <em>aid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#compute_and_write_chips"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.compute_and_write_chips" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawns compute compute chip processess.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># SLOW_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="o">.</span><span class="n">delete_annot_chips</span><span class="p">(</span><span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chip_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_and_write_chips</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.compute_and_write_chips_lazy">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">compute_and_write_chips_lazy</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#compute_and_write_chips_lazy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.compute_and_write_chips_lazy" title="Permalink to this definition">¶</a></dt>
<dd><p>Spanws compute chip procesess if a chip does not exist on disk</p>
<p>This is regardless of if it exists in the SQL database</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">testdata_preproc_chip</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.compute_or_read_annotation_chips">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">compute_or_read_annotation_chips</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>ensure=True</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#compute_or_read_annotation_chips"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.compute_or_read_annotation_chips" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.compute_or_read_chip_images">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">compute_or_read_chip_images</tt><big>(</big><em>ibs</em>, <em>cid_list</em>, <em>ensure=True</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#compute_or_read_chip_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.compute_or_read_chip_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads chips and tries to compute them if they do not exist</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">chip_list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># SLOW_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chip_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chip_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">compute_or_read_chip_images</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">cid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">chip_list</span><span class="p">)))</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">[1434, 2274, 12]</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># SLOW_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chip_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Do a bad thing. Remove from disk without removing from sql</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">preproc_chip</span><span class="o">.</span><span class="n">on_delete</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">cid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Now compute_or_read_chip_images should catch the bad thing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># we did and correct for it.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chip_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">compute_or_read_chip_images</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">cid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">chip_list</span><span class="p">)))</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">[1434, 2274, 12]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.delete_chips">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">delete_chips</tt><big>(</big><em>ibs</em>, <em>cid_list</em>, <em>verbose=False</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#delete_chips"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.delete_chips" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapped function wrp_noexectb(delete_chips)</p>
<p>orig_argspec = ArgSpec(args=[&#8216;ibs&#8217;, &#8216;cid_list&#8217;, &#8216;verbose&#8217;], varargs=None, keywords=None, defaults=(False,))</p>
<p>orig_docstr =</p>
<blockquote>
<div><p>DEPRICATE</p>
<p>Removes chips from disk (does not remove from SQLController)
this action must be performed by you.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>ibs (IBEISController):
cid_list (list):
verbose (bool):</dd>
<dt>Example:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_and_write_chips_lazy</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chip_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">cid_list</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delete_chips</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">cid_list</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="o">.</span><span class="n">delete_chips</span><span class="p">(</span><span class="n">cid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chip_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.format_aid_bbox_theta_gid_fnames">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">format_aid_bbox_theta_gid_fnames</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>fname_fmt</em>, <em>dpath</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#format_aid_bbox_theta_gid_fnames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.format_aid_bbox_theta_gid_fnames" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">fpath_list</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>   <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_aids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fname_fmt</span> <span class="o">=</span> <span class="n">get_chip_fname_fmt</span><span class="p">(</span><span class="n">ibs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dpath</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">chipdir</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fpath_list</span> <span class="o">=</span> <span class="n">format_aid_bbox_theta_gid_fnames</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">,</span> <span class="n">fname_fmt</span><span class="p">,</span> <span class="n">dpath</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="n">fpath_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">chip_aid=1_bbox=(0,0,1047,715)_theta=0.0tau_gid=1_CHIP(sz450).png</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.gen_chip">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">gen_chip</tt><big>(</big><em>tup</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#gen_chip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.gen_chip" title="Permalink to this definition">¶</a></dt>
<dd><p>Parallel worker. Crops chip out of an image, applies filters, etc</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tup</strong> (<em>tuple</em>) &#8211; (cfpath, gfpath, bbox, theta, new_size, filter_list)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">cfpath</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.generate_chip_properties">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">generate_chip_properties</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#generate_chip_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.generate_chip_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes parameters for SQLController</p>
<p>computes chips if they do not exist.
generates values for add_annot_chips sqlcommands</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params_iter</span> <span class="o">=</span> <span class="n">generate_chip_properties</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">params_iter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">cfpath</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,)</span> <span class="o">=</span> <span class="n">params_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fname</span> <span class="o">=</span> <span class="n">basename</span><span class="p">(</span><span class="n">cfpath</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fname_</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">regex_replace</span><span class="p">(</span><span class="s">&#39;auuid=.*_CHIP&#39;</span><span class="p">,</span> <span class="s">&#39;auuid={uuid}_CHIP&#39;</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">fname_</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">(&#39;chip_aid=1_auuid={uuid}_CHIP(sz450).png&#39;, 545, 372)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.get_annot_cfpath_list">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">get_annot_cfpath_list</tt><big>(</big><em>ibs</em>, <em>aid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#get_annot_cfpath_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.get_annot_cfpath_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Build chip file paths based on the current IBEIS configuration</p>
<p>A chip depends on the chip config and the parent annotation&#8217;s bounding box.
(and technically the parent image (should we put that in the file path?)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cfpath_list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_list</span> <span class="o">=</span> <span class="n">aid_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfpath_list</span> <span class="o">=</span> <span class="n">get_annot_cfpath_list</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fname</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span> <span class="n">cfpath_list</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">fname</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">chip_aid=1_bbox=(0,0,1047,715)_theta=0.0tau_gid=1_CHIP(sz450).png</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.get_chip_fname_fmt">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">get_chip_fname_fmt</tt><big>(</big><em>ibs</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#get_chip_fname_fmt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.get_chip_fname_fmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns format of chip file names</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cfname_fmt</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfname_fmt</span> <span class="o">=</span> <span class="n">get_chip_fname_fmt</span><span class="p">(</span><span class="n">ibs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">cfname_fmt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">chip_aid=%d_bbox=%s_theta=%s_gid=%d_CHIP(sz450).png</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.on_delete">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">on_delete</tt><big>(</big><em>ibs</em>, <em>cid_list</em>, <em>qreq_=None</em>, <em>verbose=True</em>, <em>strict=False</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#on_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.on_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleans up chips on disk.  Called on delete from sql controller.</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m ibeis.model.preproc.preproc_chip &#8211;test-on_delete</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_and_write_chips_lazy</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chip_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">filter_Nones</span><span class="p">(</span><span class="n">cid_list</span><span class="p">))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">cid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Run test function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qreq_</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verbose</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">strict</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nRemoved1</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">on_delete</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">cid_list</span><span class="p">,</span> <span class="n">qreq_</span><span class="o">=</span><span class="n">qreq_</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">nRemoved1</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">cid_list</span><span class="p">),</span> <span class="s">&#39;nRemoved=</span><span class="si">%r</span><span class="s">, target=</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nRemoved1</span><span class="p">,</span>  <span class="nb">len</span><span class="p">(</span><span class="n">cid_list</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nRemoved2</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">on_delete</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">cid_list</span><span class="p">,</span> <span class="n">qreq_</span><span class="o">=</span><span class="n">qreq_</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">nRemoved2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;nRemoved=</span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nRemoved2</span><span class="p">,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># We have done a bad thing at this point. SQL still thinks chips exist</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cid_list2</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chip_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="o">.</span><span class="n">delete_chips</span><span class="p">(</span><span class="n">cid_list2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_chip.testdata_preproc_chip">
<tt class="descclassname">ibeis.model.preproc.preproc_chip.</tt><tt class="descname">testdata_preproc_chip</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_chip.html#testdata_preproc_chip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_chip.testdata_preproc_chip" title="Permalink to this definition">¶</a></dt>
<dd><p>testdata function</p>
</dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_detectchip">
<span id="ibeis-model-preproc-preproc-detectchip-module"></span><h2>ibeis.model.preproc.preproc_detectchip module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_detectchip" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectchip.compute_and_write_detectimg">
<tt class="descclassname">ibeis.model.preproc.preproc_detectchip.</tt><tt class="descname">compute_and_write_detectimg</tt><big>(</big><em>ibs</em>, <em>gid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectchip.html#compute_and_write_detectimg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectchip.compute_and_write_detectimg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectchip.compute_and_write_detectimg_lazy">
<tt class="descclassname">ibeis.model.preproc.preproc_detectchip.</tt><tt class="descname">compute_and_write_detectimg_lazy</tt><big>(</big><em>ibs</em>, <em>gid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectchip.html#compute_and_write_detectimg_lazy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectchip.compute_and_write_detectimg_lazy" title="Permalink to this definition">¶</a></dt>
<dd><p>Will write a img if it does not exist on disk, regardless of if it exists
in the SQL database</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectchip.gen_detectimg_and_write">
<tt class="descclassname">ibeis.model.preproc.preproc_detectchip.</tt><tt class="descname">gen_detectimg_and_write</tt><big>(</big><em>tup</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectchip.html#gen_detectimg_and_write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectchip.gen_detectimg_and_write" title="Permalink to this definition">¶</a></dt>
<dd><p>worker function for parallel generator</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectchip.gen_detectimg_async">
<tt class="descclassname">ibeis.model.preproc.preproc_detectchip.</tt><tt class="descname">gen_detectimg_async</tt><big>(</big><em>gid_list</em>, <em>gfpath_list</em>, <em>new_gfpath_list</em>, <em>newsize_list</em>, <em>nImgs=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectchip.html#gen_detectimg_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectchip.gen_detectimg_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Resizes images and yeilds results asynchronously</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectchip.get_image_detectimg_fpath_list">
<tt class="descclassname">ibeis.model.preproc.preproc_detectchip.</tt><tt class="descname">get_image_detectimg_fpath_list</tt><big>(</big><em>ibs</em>, <em>gid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectchip.html#get_image_detectimg_fpath_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectchip.get_image_detectimg_fpath_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns detectimg path list</p>
</dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_detectimg">
<span id="ibeis-model-preproc-preproc-detectimg-module"></span><h2>ibeis.model.preproc.preproc_detectimg module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_detectimg" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectimg.compute_and_write_detectimg">
<tt class="descclassname">ibeis.model.preproc.preproc_detectimg.</tt><tt class="descname">compute_and_write_detectimg</tt><big>(</big><em>ibs</em>, <em>gid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectimg.html#compute_and_write_detectimg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectimg.compute_and_write_detectimg" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># SLOW_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_detectimg</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_gids</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_gids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gid_list</span> <span class="o">=</span> <span class="n">valid_gids</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">compute_and_write_detectimg</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">gid_list</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectimg.compute_and_write_detectimg_lazy">
<tt class="descclassname">ibeis.model.preproc.preproc_detectimg.</tt><tt class="descname">compute_and_write_detectimg_lazy</tt><big>(</big><em>ibs</em>, <em>gid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectimg.html#compute_and_write_detectimg_lazy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectimg.compute_and_write_detectimg_lazy" title="Permalink to this definition">¶</a></dt>
<dd><p>Will write a img if it does not exist on disk, regardless of if it exists
in the SQL database</p>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># SLOW_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_detectimg</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_gids</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_gids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gid_list</span> <span class="o">=</span> <span class="n">valid_gids</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">compute_and_write_detectimg_lazy</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">gid_list</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectimg.gen_detectimg_and_write">
<tt class="descclassname">ibeis.model.preproc.preproc_detectimg.</tt><tt class="descname">gen_detectimg_and_write</tt><big>(</big><em>tup</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectimg.html#gen_detectimg_and_write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectimg.gen_detectimg_and_write" title="Permalink to this definition">¶</a></dt>
<dd><p>worker function for parallel generator</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectimg.gen_detectimg_async">
<tt class="descclassname">ibeis.model.preproc.preproc_detectimg.</tt><tt class="descname">gen_detectimg_async</tt><big>(</big><em>gid_list</em>, <em>gfpath_list</em>, <em>new_gfpath_list</em>, <em>newsize_list</em>, <em>nImgs=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectimg.html#gen_detectimg_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectimg.gen_detectimg_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Resizes images and yeilds results asynchronously</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_detectimg.get_image_detectimg_fpath_list">
<tt class="descclassname">ibeis.model.preproc.preproc_detectimg.</tt><tt class="descname">get_image_detectimg_fpath_list</tt><big>(</big><em>ibs</em>, <em>gid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_detectimg.html#get_image_detectimg_fpath_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_detectimg.get_image_detectimg_fpath_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns detectimg path list</p>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_detectimg</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_gids</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_gids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gid_list</span> <span class="o">=</span> <span class="n">valid_gids</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_gfpath_list</span> <span class="o">=</span> <span class="n">get_image_detectimg_fpath_list</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">gid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span> <span class="n">new_gfpath_list</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span>
<span class="gp">... </span>   <span class="s">&#39;reszd_sqrtArea=800_66ec193a-1619-b3b6-216d-1784b4833b61.jpg&#39;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s">&#39;reszd_sqrtArea=800_d8903434-942f-e0f5-d6c2-0dcbe3137bf7.jpg&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">target</span><span class="p">,</span> <span class="s">&#39;got result=</span><span class="se">\n</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">result</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_encounter">
<span id="ibeis-model-preproc-preproc-encounter-module"></span><h2>ibeis.model.preproc.preproc_encounter module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_encounter" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_encounter.cluster_timespace">
<tt class="descclassname">ibeis.model.preproc.preproc_encounter.</tt><tt class="descname">cluster_timespace</tt><big>(</big><em>X_data</em>, <em>thresh</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_encounter.html#cluster_timespace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_encounter.cluster_timespace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_encounter.haversine">
<tt class="descclassname">ibeis.model.preproc.preproc_encounter.</tt><tt class="descname">haversine</tt><big>(</big><em>lon1</em>, <em>lat1</em>, <em>lon2</em>, <em>lat2</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_encounter.html#haversine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_encounter.haversine" title="Permalink to this definition">¶</a></dt>
<dd><p>#http://gis.stackexchange.com/questions/81551/matching-gps-tracks
Calculate the great circle distance between two points
on the earth (specified in decimal degrees)
<a class="reference external" href="http://en.wikipedia.org/wiki/Haversine_formula">http://en.wikipedia.org/wiki/Haversine_formula</a>
<a class="reference external" href="http://stackoverflow.com/questions/4913349/haversine-formula-in-python-bearing-and-distance-between-two-gps-points">http://stackoverflow.com/questions/4913349/haversine-formula-in-python-bearing-and-distance-between-two-gps-points</a></p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_encounter.ibeis_compute_encounters">
<tt class="descclassname">ibeis.model.preproc.preproc_encounter.</tt><tt class="descname">ibeis_compute_encounters</tt><big>(</big><em>ibs</em>, <em>gid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_encounter.html#ibeis_compute_encounters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_encounter.ibeis_compute_encounters" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapped function wrp_noexectb(ibeis_compute_encounters)</p>
<p>orig_argspec = ArgSpec(args=[&#8216;ibs&#8217;, &#8216;gid_list&#8217;], varargs=None, keywords=None, defaults=None)</p>
<dl class="docutils">
<dt>orig_docstr =</dt>
<dd>clusters encounters togethers (by time, not yet space)
An encounter is a meeting, localized in time and space between a camera and
a group of animals.  Animals are identified within each encounter.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_encounter.plot_annotaiton_gps">
<tt class="descclassname">ibeis.model.preproc.preproc_encounter.</tt><tt class="descname">plot_annotaiton_gps</tt><big>(</big><em>X_Data</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_encounter.html#plot_annotaiton_gps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_encounter.plot_annotaiton_gps" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots gps coordinates on a map projection</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_encounter.testdata_gps">
<tt class="descclassname">ibeis.model.preproc.preproc_encounter.</tt><tt class="descname">testdata_gps</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_encounter.html#testdata_gps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_encounter.testdata_gps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_encounter.timespace_distance">
<tt class="descclassname">ibeis.model.preproc.preproc_encounter.</tt><tt class="descname">timespace_distance</tt><big>(</big><em>pt1</em>, <em>pt2</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_encounter.html#timespace_distance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_encounter.timespace_distance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_encounter.timespace_pdist">
<tt class="descclassname">ibeis.model.preproc.preproc_encounter.</tt><tt class="descname">timespace_pdist</tt><big>(</big><em>X_data</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_encounter.html#timespace_pdist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_encounter.timespace_pdist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_feat">
<span id="ibeis-model-preproc-preproc-feat-module"></span><h2>ibeis.model.preproc.preproc_feat module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_feat" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_feat.add_feat_params_gen">
<tt class="descclassname">ibeis.model.preproc.preproc_feat.</tt><tt class="descname">add_feat_params_gen</tt><big>(</big><em>ibs</em>, <em>cid_list</em>, <em>qreq_=None</em>, <em>nInput=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_feat.html#add_feat_params_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_feat.add_feat_params_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>still used in manual code
DEPRICATE IN FAVOR OF AUTOGEN</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_feat.gen_feat_openmp">
<tt class="descclassname">ibeis.model.preproc.preproc_feat.</tt><tt class="descname">gen_feat_openmp</tt><big>(</big><em>cid_list</em>, <em>cfpath_list</em>, <em>hesaff_params</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_feat.html#gen_feat_openmp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_feat.gen_feat_openmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute features in parallel on the C++ side, return generator here</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_feat.gen_feat_worker">
<tt class="descclassname">ibeis.model.preproc.preproc_feat.</tt><tt class="descname">gen_feat_worker</tt><big>(</big><em>tup</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_feat.html#gen_feat_worker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_feat.gen_feat_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to be parallelized by multiprocessing / joblib / whatever.
Must take in one argument to be used by multiprocessing.map_async</p>
<dl class="docutils">
<dt>Cyth::</dt>
<dd><dl class="first last docutils">
<dt>cdef:</dt>
<dd>long cid
str cpath
dict hesaff_params
np.ndarray[kpts_t, ndims=2] kpts
np.ndarray[desc_t, ndims=2] desc</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_feat.generate_feat_properties">
<tt class="descclassname">ibeis.model.preproc.preproc_feat.</tt><tt class="descname">generate_feat_properties</tt><big>(</big><em>ibs</em>, <em>cid_list</em>, <em>qreq_=None</em>, <em>nInput=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_feat.html#generate_feat_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_feat.generate_feat_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes features and yields results asynchronously: TODO: Remove IBEIS from
this equation. Move the firewall towards the controller</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">generates param tups</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">generator</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_feat</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_aids</span><span class="p">()[::</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chip_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qreq_</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nInput</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">featgen</span> <span class="o">=</span> <span class="n">generate_feat_properties</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">cid_list</span><span class="p">,</span> <span class="n">qreq_</span><span class="p">,</span> <span class="n">nInput</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feat_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">featgen</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">feat_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">nFeat</span><span class="p">,</span> <span class="n">kpts</span><span class="p">,</span> <span class="n">vecs</span><span class="p">)</span> <span class="o">=</span> <span class="n">feat_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">nFeat</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">kpts</span><span class="p">)</span> <span class="ow">and</span> <span class="n">nFeat</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">vecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">kpts</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">vecs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">128</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_feat.generate_feats">
<tt class="descclassname">ibeis.model.preproc.preproc_feat.</tt><tt class="descname">generate_feats</tt><big>(</big><em>cfpath_list</em>, <em>hesaff_params={}</em>, <em>cid_list=None</em>, <em>nInput=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_feat.html#generate_feats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_feat.generate_feats" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to be parallelized by multiprocessing / joblib / whatever.
Must take in one argument to be used by multiprocessing.map_async</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
</tbody>
</table>
<dl class="docutils">
<dt>Kwargs:</dt>
<dd>passed to utool.generate</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">featgen</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Cyth:</dt>
<dd><dl class="first last docutils">
<dt>cdef:</dt>
<dd>list cfpath_list
long nInput
object cid_list
dict hesaff_params
dict kwargs</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_feat.on_delete">
<tt class="descclassname">ibeis.model.preproc.preproc_feat.</tt><tt class="descname">on_delete</tt><big>(</big><em>ibs</em>, <em>gid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_feat.html#on_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_feat.on_delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_featweight">
<span id="ibeis-model-preproc-preproc-featweight-module"></span><h2>ibeis.model.preproc.preproc_featweight module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_featweight" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_featweight.add_featweight_params_gen">
<tt class="descclassname">ibeis.model.preproc.preproc_featweight.</tt><tt class="descname">add_featweight_params_gen</tt><big>(</big><em>ibs</em>, <em>fid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_featweight.html#add_featweight_params_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_featweight.add_featweight_params_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRICATE</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">featweight_list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># DEPRICATE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_featweight</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_fids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">add_featweight_params_gen</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">fid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_featweight.compute_fgweights">
<tt class="descclassname">ibeis.model.preproc.preproc_featweight.</tt><tt class="descname">compute_fgweights</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_featweight.html#compute_fgweights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_featweight.compute_fgweights" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># SLOW_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_featweight</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_aids</span><span class="p">()[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qreq_</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">featweight_list</span> <span class="o">=</span> <span class="n">compute_fgweights</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array_str</span><span class="p">(</span><span class="n">featweight_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">precision</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">[ 0.125  0.061  0.053]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_featweight.gen_featweight_worker">
<tt class="descclassname">ibeis.model.preproc.preproc_featweight.</tt><tt class="descname">gen_featweight_worker</tt><big>(</big><em>tup</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_featweight.html#gen_featweight_worker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_featweight.gen_featweight_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to be parallelized by multiprocessing / joblib / whatever.
Must take in one argument to be used by multiprocessing.map_async</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tup</strong> (<em>aid, tuple(kpts(ndarray), probchip_fpath )</em>) &#8211; keypoints and probability chip file path</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m ibeis.model.preproc.preproc_featweight &#8211;test-gen_featweight_worker</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_featweight</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_aids</span><span class="p">()[</span><span class="n">ax</span><span class="p">:</span><span class="n">ax</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chip_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_chips</span><span class="p">(</span><span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kpts_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_kpts</span><span class="p">(</span><span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">probchip_fpath_list</span> <span class="o">=</span> <span class="n">preproc_probchip</span><span class="o">.</span><span class="n">compute_and_write_probchip</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">probchip_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">vtimage</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="n">grayscale</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="k">if</span> <span class="n">exists</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span> <span class="k">else</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">fpath</span> <span class="ow">in</span> <span class="n">probchip_fpath_list</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kpts</span>  <span class="o">=</span> <span class="n">kpts_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid</span>   <span class="o">=</span> <span class="n">aid_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">probchip</span> <span class="o">=</span> <span class="n">probchip_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="n">aid</span><span class="p">,</span> <span class="n">kpts</span><span class="p">,</span> <span class="n">probchip</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">aid</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span> <span class="o">=</span> <span class="n">gen_featweight_worker</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weights_03_test</span> <span class="o">=</span> <span class="n">weights</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&#39;weights[0:3] = </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">weights_03_test</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#weights_03_target = [ 0.098, 0.155,  0.422]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weights_03_target</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.504</span><span class="p">,</span> <span class="mf">0.875</span><span class="p">,</span>  <span class="mf">2.205</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weights_thresh</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span>  <span class="mf">0.002</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">assert_almost_eq</span><span class="p">(</span><span class="n">weights_03_test</span><span class="p">,</span> <span class="n">weights_03_target</span><span class="p">,</span> <span class="n">weights_thresh</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">aid</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Ignore::</dt>
<dd><p class="first">import plottool as pt
pt.imshow(probchip_list[0])
patch_list = [vtpatch.get_warped_patch(probchip, kp)[0].astype(np.float32) / 255.0 for kp in kpts[0:1]]
<a href="#id5"><span class="problematic" id="id6">patch_</span></a> = patch_list[0].copy()
patch = <a href="#id7"><span class="problematic" id="id8">patch_</span></a>
patch = patch_[-20:, :20, 0]</p>
<p>import vtool as vt
gaussian_patch = vt.gaussian_patch(patch.shape[1], patch.shape[0], shape=patch.shape[0:2], norm_01=False)</p>
<p>import cv2
sigma = 1/10
xkernel = (cv2.getGaussianKernel(patch.shape[1], sigma))
ykernel = (cv2.getGaussianKernel(patch.shape[0], sigma))</p>
<p>#ykernel = ykernel / ykernel.max()
#xkernel = ykernel / xkernel.max()</p>
<p>gaussian_kern2 = ykernel.dot(xkernel.T)
print(gaussian_kern2.sum())</p>
<p>patch2 = patch.copy()
patch2 = np.multiply(patch2,   ykernel)
patch2 = np.multiply(patch2.T, xkernel).T</p>
<dl class="docutils">
<dt>if len(patch3.shape) == 2:</dt>
<dd>patch3 = patch.copy() * gaussian_patch[:,:]</dd>
<dt>else:</dt>
<dd>patch3 = patch.copy() * gaussian_patch[:,:, None]</dd>
</dl>
<p>sum2 = patch2.sum() / (patch2.size)
sum3 = patch3.sum() / (patch3.size)</p>
<p>print(sum2)
print(sum3)</p>
<p class="last">fig = pt.figure(fnum=1, pnum=(1, 3, 1), doclf=True, docla=True)
pt.imshow(patch * 255)
fig = pt.figure(fnum=1, pnum=(1, 3, 2))
pt.imshow(gaussian_kern2 * 255.0)
fig = pt.figure(fnum=1, pnum=(1, 3, 3))
pt.imshow(patch2 * 255.0)
pt.update()</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_featweight.generate_featweight_properties">
<tt class="descclassname">ibeis.model.preproc.preproc_featweight.</tt><tt class="descname">generate_featweight_properties</tt><big>(</big><em>ibs</em>, <em>fid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_featweight.html#generate_featweight_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_featweight.generate_featweight_properties" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">featweight_list</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m ibeis.model.preproc.preproc_featweight &#8211;test-generate_featweight_properties</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_featweight</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_aids</span><span class="p">()[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_annot_feat_rowids</span><span class="p">(</span><span class="n">aid_list</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#fid_list = ibs.get_valid_fids()[1:2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">featweighttup_gen</span> <span class="o">=</span> <span class="n">generate_featweight_properties</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">fid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">featweighttup_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">featweighttup_gen</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">featweight_list</span> <span class="o">=</span> <span class="n">featweighttup_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array_str</span><span class="p">(</span><span class="n">featweight_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">precision</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">[ 0.125  0.061  0.053]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_featweight.on_delete">
<tt class="descclassname">ibeis.model.preproc.preproc_featweight.</tt><tt class="descname">on_delete</tt><big>(</big><em>ibs</em>, <em>featweight_rowid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_featweight.html#on_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_featweight.on_delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_image">
<span id="ibeis-model-preproc-preproc-image-module"></span><h2>ibeis.model.preproc.preproc_image module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_image" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_image.add_images_params_gen">
<tt class="descclassname">ibeis.model.preproc.preproc_image.</tt><tt class="descname">add_images_params_gen</tt><big>(</big><em>gpath_list</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_image.html#add_images_params_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_image.add_images_params_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>generates values for add_images sqlcommands asychronously</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_image</span> <span class="kn">import</span> <span class="o">*</span>   <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">vtool.tests</span> <span class="kn">import</span> <span class="n">grabdata</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gpath_list</span> <span class="o">=</span> <span class="n">grabdata</span><span class="o">.</span><span class="n">get_test_gpaths</span><span class="p">(</span><span class="n">ndata</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;doesnotexist.jpg&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">add_images_params_gen</span><span class="p">(</span><span class="n">gpath_list</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">params_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="s">&#39;66ec193a-1619-b3b6-216d-1784b4833b61&#39;</span><span class="p">,</span> <span class="s">&#39;UUID gen method changed&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">params_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="s">&#39;easy1.JPG&#39;</span><span class="p">,</span> <span class="s">&#39;orig name is different&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">params_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Cyth::</dt>
<dd><dl class="first last docutils">
<dt>cdef:</dt>
<dd>list gpath_list
dict kwargs</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_image.get_image_uuid">
<tt class="descclassname">ibeis.model.preproc.preproc_image.</tt><tt class="descname">get_image_uuid</tt><big>(</big><em>pil_img</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_image.html#get_image_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_image.get_image_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRICATE</p>
<p>Cyth:</p>
<div class="highlight-python"><div class="highlight"><pre>cdef:
    UUID uuid_
    object img_bytes_
    object bytes_sha1
    object hashbytes_16
    object hashbytes_20
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_image.get_standard_ext">
<tt class="descclassname">ibeis.model.preproc.preproc_image.</tt><tt class="descname">get_standard_ext</tt><big>(</big><em>gpath</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_image.html#get_standard_ext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_image.get_standard_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns standardized image extension</p>
<dl class="docutils">
<dt>Cyth::</dt>
<dd><dl class="first last docutils">
<dt>cdef:</dt>
<dd>str gpath
str ext</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_image.on_delete">
<tt class="descclassname">ibeis.model.preproc.preproc_image.</tt><tt class="descname">on_delete</tt><big>(</big><em>ibs</em>, <em>featweight_rowid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_image.html#on_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_image.on_delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_image.parse_exif">
<tt class="descclassname">ibeis.model.preproc.preproc_image.</tt><tt class="descname">parse_exif</tt><big>(</big><em>pil_img</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_image.html#parse_exif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_image.parse_exif" title="Permalink to this definition">¶</a></dt>
<dd><p>Image EXIF helper</p>
<dl class="docutils">
<dt>Cyth::</dt>
<dd><dl class="first last docutils">
<dt>cdef:</dt>
<dd>Image pil_img
dict exif_dict
long lat
long lon
long exiftime</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_image.parse_imageinfo">
<tt class="descclassname">ibeis.model.preproc.preproc_image.</tt><tt class="descname">parse_imageinfo</tt><big>(</big><em>tup</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_image.html#parse_imageinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_image.parse_imageinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Worker function: gpath must be in UNIX-PATH format!</p>
<dl class="docutils">
<dt>Input:</dt>
<dd>a tuple of arguments (so the function can be parallelized easily)</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">if successful returns a tuple of image parameters which are values for
SQL columns on else returns None</td>
</tr>
</tbody>
</table>
<p>Cyth:</p>
<div class="highlight-python"><div class="highlight"><pre>cdef:
    str gpath
    Image pil_img
    str orig_gname
    str ext
    long width
    long height
    long time
    long lat
    long lon
    str notes
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_probchip">
<span id="ibeis-model-preproc-preproc-probchip-module"></span><h2>ibeis.model.preproc.preproc_probchip module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_probchip" title="Permalink to this headline">¶</a></h2>
<p>Preprocess Probability Chips</p>
<p>Uses random forests code to detect the probability that pixel belongs to the
forground.</p>
<dl class="docutils">
<dt>TODO:</dt>
<dd><ul class="first last">
<li><p class="first">Create a probchip controller table.</p>
</li>
<li><dl class="first docutils">
<dt>Integrate into the the controller using autogen functions.</dt>
<dd><ul class="first last simple">
<li>get_probchip_fpaths, get_annot_probchip_fpaths, add_annot_probchip</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">User should be able to manually paint on a chip to denote the foreground
when the randomforest algorithm messes up.</p>
</li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_probchip.compute_and_write_probchip">
<tt class="descclassname">ibeis.model.preproc.preproc_probchip.</tt><tt class="descname">compute_and_write_probchip</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_probchip.html#compute_and_write_probchip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_probchip.compute_and_write_probchip" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes probability chips using pyrf</p>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qreq_</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_aids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_and_write_probchip</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">,</span> <span class="n">qreq_</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Dev::</dt>
<dd>#ibs.delete_annot_chips(aid_list)
#probchip_fpath_list = get_annot_probchip_fpath_list(ibs, aid_list)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_probchip.get_annot_probchip_fpath_list">
<tt class="descclassname">ibeis.model.preproc.preproc_probchip.</tt><tt class="descname">get_annot_probchip_fpath_list</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>qreq_=None</em>, <em>species=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_probchip.html#get_annot_probchip_fpath_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_probchip.get_annot_probchip_fpath_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Build probability chip file paths based on the current IBEIS configuration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">probchip_fpath_list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_probchip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qreq_</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">probchip_fpath_list</span> <span class="o">=</span> <span class="n">get_annot_probchip_fpath_list</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">basename</span><span class="p">(</span><span class="n">probchip_fpath_list</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">probchip_aid=5_bbox=(0,0,1072,804)_theta=0.0tau_gid=5_CHIP(sz450)_FEATWEIGHT(ON,uselabel,rf)_CHIP().png</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_probchip.get_probchip_cachedir">
<tt class="descclassname">ibeis.model.preproc.preproc_probchip.</tt><tt class="descname">get_probchip_cachedir</tt><big>(</big><em>ibs</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_probchip.html#get_probchip_cachedir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_probchip.get_probchip_cachedir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_probchip.get_probchip_fname_fmt">
<tt class="descclassname">ibeis.model.preproc.preproc_probchip.</tt><tt class="descname">get_probchip_fname_fmt</tt><big>(</big><em>ibs</em>, <em>qreq_=None</em>, <em>species=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_probchip.html#get_probchip_fname_fmt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_probchip.get_probchip_fname_fmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns format of probability chip file names</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">probchip_fname_fmt</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc</span> <span class="kn">import</span> <span class="n">preproc_chip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span> <span class="o">=</span> <span class="n">preproc_chip</span><span class="o">.</span><span class="n">testdata_preproc_chip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qreq_</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">probchip_fname_fmt</span> <span class="o">=</span> <span class="n">get_probchip_fname_fmt</span><span class="p">(</span><span class="n">ibs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#want = &#39;probchip_aid=%d_bbox=%s_CHIP(sz450)_FEATWEIGHT(ON,uselabel,rf)_CHIP().png&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#assert probchip_fname_fmt == want, probchip_fname_fmt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">probchip_fname_fmt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">probchip_aid=%d_bbox=%s_theta=%s_gid=%d_CHIP(sz450)_FEATWEIGHT(ON,uselabel,rf)_CHIP().png</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_probchip.group_aids_by_featweight_species">
<tt class="descclassname">ibeis.model.preproc.preproc_probchip.</tt><tt class="descname">group_aids_by_featweight_species</tt><big>(</big><em>ibs</em>, <em>aid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_probchip.html#group_aids_by_featweight_species"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_probchip.group_aids_by_featweight_species" title="Permalink to this definition">¶</a></dt>
<dd><p>helper</p>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ibeis.model.preproc.preproc_chip</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ibeis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">ibeis</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qreq_</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">get_valid_aids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grouped_aids</span><span class="p">,</span> <span class="n">unique_species</span> <span class="o">=</span> <span class="n">group_aids_by_featweight_species</span><span class="p">(</span><span class="n">ibs</span><span class="p">,</span> <span class="n">aid_list</span><span class="p">,</span> <span class="n">qreq_</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_probchip.postprocess_dev">
<tt class="descclassname">ibeis.model.preproc.preproc_probchip.</tt><tt class="descname">postprocess_dev</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_probchip.html#postprocess_dev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_probchip.postprocess_dev" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">References</p>
<p><a class="reference external" href="http://opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html">http://opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html</a></p>
</dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_residual">
<span id="ibeis-model-preproc-preproc-residual-module"></span><h2>ibeis.model.preproc.preproc_residual module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_residual" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_residual.add_residual_params_gen">
<tt class="descclassname">ibeis.model.preproc.preproc_residual.</tt><tt class="descname">add_residual_params_gen</tt><big>(</big><em>ibs</em>, <em>fid_list</em>, <em>qreq_=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_residual.html#add_residual_params_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_residual.add_residual_params_gen" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_residual.on_delete">
<tt class="descclassname">ibeis.model.preproc.preproc_residual.</tt><tt class="descname">on_delete</tt><big>(</big><em>ibs</em>, <em>featweight_rowid_list</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_residual.html#on_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_residual.on_delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc.preproc_rvec">
<span id="ibeis-model-preproc-preproc-rvec-module"></span><h2>ibeis.model.preproc.preproc_rvec module<a class="headerlink" href="#module-ibeis.model.preproc.preproc_rvec" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.preproc_rvec.add_rvecs_params_gen">
<tt class="descclassname">ibeis.model.preproc.preproc_rvec.</tt><tt class="descname">add_rvecs_params_gen</tt><big>(</big><em>ibs</em>, <em>nInput=None</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_rvec.html#add_rvecs_params_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_rvec.add_rvecs_params_gen" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.preproc_rvec.generate_rvecs">
<tt class="descclassname">ibeis.model.preproc.preproc_rvec.</tt><tt class="descname">generate_rvecs</tt><big>(</big><em>vecs_list</em>, <em>words</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc/preproc_rvec.html#generate_rvecs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.preproc_rvec.generate_rvecs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ibeis.model.preproc">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ibeis.model.preproc" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ibeis.model.preproc.reload_subs">
<tt class="descclassname">ibeis.model.preproc.</tt><tt class="descname">reload_subs</tt><big>(</big><em>verbose=True</em><big>)</big><a class="reference internal" href="_modules/ibeis/model/preproc.html#reload_subs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ibeis.model.preproc.reload_subs" title="Permalink to this definition">¶</a></dt>
<dd><p>Reloads ibeis.model.preproc and submodules</p>
</dd></dl>

<dl class="function">
<dt id="ibeis.model.preproc.rrrr">
<tt class="descclassname">ibeis.model.preproc.</tt><tt class="descname">rrrr</tt><big>(</big><em>verbose=True</em><big>)</big><a class="headerlink" href="#ibeis.model.preproc.rrrr" title="Permalink to this definition">¶</a></dt>
<dd><p>Reloads ibeis.model.preproc and submodules</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">ibeis.model.preproc package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_annot">ibeis.model.preproc.preproc_annot module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_chip">ibeis.model.preproc.preproc_chip module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_detectchip">ibeis.model.preproc.preproc_detectchip module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_detectimg">ibeis.model.preproc.preproc_detectimg module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_encounter">ibeis.model.preproc.preproc_encounter module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_feat">ibeis.model.preproc.preproc_feat module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_featweight">ibeis.model.preproc.preproc_featweight module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_image">ibeis.model.preproc.preproc_image module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_probchip">ibeis.model.preproc.preproc_probchip module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_residual">ibeis.model.preproc.preproc_residual module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc.preproc_rvec">ibeis.model.preproc.preproc_rvec module</a></li>
<li><a class="reference internal" href="#module-ibeis.model.preproc">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ibeis.model.hots.smk.html"
                        title="previous chapter">ibeis.model.hots.smk package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ibeis.tests.html"
                        title="next chapter">ibeis.tests package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/ibeis.model.preproc.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ibeis.tests.html" title="ibeis.tests package"
             >next</a> |</li>
        <li class="right" >
          <a href="ibeis.model.hots.smk.html" title="ibeis.model.hots.smk package"
             >previous</a> |</li>
        <li><a href="index.html">ibeis 0.1.0.dev1 documentation</a> &raquo;</li>
          <li><a href="ibeis.html" >ibeis package</a> &raquo;</li>
          <li><a href="ibeis.model.html" >ibeis.model package</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Jon Crall.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>