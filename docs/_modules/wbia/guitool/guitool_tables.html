
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>wbia.guitool.guitool_tables &#8212; wbia 2.2.4 documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />

  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />


  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">


          <div class="body" role="main">

  <h1>Source code for wbia.guitool.guitool_tables</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># DEPRICATE?</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">wbia.guitool.__PYQT__</span> <span class="k">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span>
<span class="kn">from</span> <span class="nn">wbia.guitool.__PYQT__</span> <span class="k">import</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">wbia.guitool.__PYQT__.QtCore</span> <span class="k">import</span> <span class="n">Qt</span>
<span class="kn">from</span> <span class="nn">wbia.guitool.guitool_delegates</span> <span class="k">import</span> <span class="n">ComboDelegate</span><span class="p">,</span> <span class="n">ButtonDelegate</span>
<span class="kn">from</span> <span class="nn">wbia.guitool</span> <span class="k">import</span> <span class="n">qtype</span>
<span class="kn">from</span> <span class="nn">six.moves</span> <span class="k">import</span> <span class="nb">range</span><span class="p">,</span> <span class="nb">map</span>
<span class="kn">import</span> <span class="nn">utool</span>

<span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="n">rrr</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span> <span class="o">=</span> <span class="n">utool</span><span class="o">.</span><span class="n">inject2</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="ColumnListTableView"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListTableView">[docs]</a><span class="k">class</span> <span class="nc">ColumnListTableView</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTableView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Table View for an AbstractItemModel &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ColumnListTableView</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">vertical_header</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span>
        <span class="n">view</span><span class="o">.</span><span class="n">vertical_header</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># view.setSelectionBehavior(QtWidgets.QAbstractItemView.SelectRows)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>

<div class="viewcode-block" id="ColumnListTableView.cellButtonClicked"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListTableView.cellButtonClicked">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">cellButtonClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="ColumnListItemModel"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel">[docs]</a><span class="k">class</span> <span class="nc">ColumnListItemModel</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QAbstractTableModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Item model for displaying a list of columns &quot;&quot;&quot;</span>

    <span class="c1">#</span>
    <span class="c1"># Non-Qt Init Functions</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
        <span class="n">model</span><span class="p">,</span>
        <span class="n">col_data_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_name_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">niceheader_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_type_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_edit_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">display_indices</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">col_sort_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ColumnListItemModel</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="n">model</span><span class="o">.</span><span class="n">sortcolumn</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">model</span><span class="o">.</span><span class="n">sortreverse</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">model</span><span class="o">.</span><span class="n">display_indices</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># FIXME: Broken</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_change_data</span><span class="p">(</span>
            <span class="n">col_data_list</span><span class="p">,</span>
            <span class="n">col_name_list</span><span class="p">,</span>
            <span class="n">niceheader_list</span><span class="p">,</span>
            <span class="n">col_type_list</span><span class="p">,</span>
            <span class="n">col_edit_list</span><span class="p">,</span>
            <span class="n">display_indices</span><span class="p">,</span>
            <span class="n">col_sort_index</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_change_data</span><span class="p">(</span>
        <span class="n">model</span><span class="p">,</span>
        <span class="n">col_data_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_name_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">niceheader_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_type_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_edit_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">display_indices</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">col_sort_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">model</span><span class="o">.</span><span class="n">layoutAboutToBeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">col_name_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">col_name_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">col_data_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">col_data_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">col_data_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">sortcolumn</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># print(&#39;[model] Changing data&#39;)</span>
        <span class="c1"># Set the data to display (list of lists)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_change_columns</span><span class="p">(</span><span class="n">col_data_list</span><span class="p">,</span> <span class="n">col_type_list</span><span class="p">)</span>
        <span class="c1"># Set the headers</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_change_headers</span><span class="p">(</span><span class="n">col_name_list</span><span class="p">,</span> <span class="n">niceheader_list</span><span class="p">)</span>
        <span class="c1"># Is editable</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_change_editable</span><span class="p">(</span><span class="n">col_edit_list</span><span class="p">)</span>
        <span class="c1"># Make internal indices</span>
        <span class="n">model</span><span class="o">.</span><span class="n">set_sorting</span><span class="p">(</span><span class="n">col_sort_index</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">display_indices</span> <span class="o">=</span> <span class="n">display_indices</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_change_row_indices</span><span class="p">()</span>
        <span class="c1"># Make sure the user didn&#39;t do anything bad</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_assert_feasibility</span><span class="p">()</span>
        <span class="n">model</span><span class="o">.</span><span class="n">layoutChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_change_editable</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">col_edit_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">col_edit_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">column_editable</span> <span class="o">=</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">column_editable</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">header</span> <span class="ow">in</span> <span class="n">col_edit_list</span> <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">col_name_list</span>
            <span class="p">]</span>
        <span class="c1"># print(&#39;[model] new column_editable = %r&#39; % (model.column_editable,))</span>

    <span class="k">def</span> <span class="nf">_change_headers</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">col_name_list</span><span class="p">,</span> <span class="n">niceheader_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Internal header names &quot;&quot;&quot;</span>
        <span class="n">model</span><span class="o">.</span><span class="n">col_name_list</span> <span class="o">=</span> <span class="n">col_name_list</span>
        <span class="c1"># Set user readable &quot;nice&quot; headers, default to internal ones</span>
        <span class="k">if</span> <span class="n">niceheader_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">niceheader_list</span> <span class="o">=</span> <span class="n">col_name_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">niceheader_list</span> <span class="o">=</span> <span class="n">niceheader_list</span>
        <span class="c1"># print(&#39;[model] new col_name_list = %r&#39; % (model.col_name_list,))</span>

    <span class="k">def</span> <span class="nf">_change_columns</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">col_data_list</span><span class="p">,</span> <span class="n">col_type_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span> <span class="o">=</span> <span class="n">col_data_list</span>
        <span class="k">if</span> <span class="n">col_type_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">col_type_list</span> <span class="o">=</span> <span class="n">col_type_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">col_type_list</span> <span class="o">=</span> <span class="n">qtype</span><span class="o">.</span><span class="n">infer_coltype</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">)</span>
        <span class="c1"># print(&#39;[model] new col_type_list = %r&#39; % (model.col_type_list,))</span>

    <span class="k">def</span> <span class="nf">_change_row_indices</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Non-Qt Helper &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">sortcolumn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;using: sortcolumn=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">model</span><span class="o">.</span><span class="n">sortcolumn</span><span class="p">)</span>
            <span class="n">column_data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">sortcolumn</span><span class="p">]</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">column_data</span><span class="p">)))</span>
            <span class="n">model</span><span class="o">.</span><span class="n">row_sortx</span> <span class="o">=</span> <span class="n">utool</span><span class="o">.</span><span class="n">sortedby</span><span class="p">(</span>
                <span class="n">indices</span><span class="p">,</span> <span class="n">column_data</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">sortreverse</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">row_sortx</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">row_sortx</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># print(&#39;[model] new len(row_sortx) = %r&#39; % (len(model.row_sortx),))</span>

    <span class="k">def</span> <span class="nf">_assert_feasibility</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">col_name_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">)</span>
        <span class="n">nrows</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="n">nrows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nrows</span><span class="p">]),</span> <span class="s1">&#39;inconsistent data&#39;</span>
        <span class="c1"># print(&#39;[model] is feasible&#39;)</span>

    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># Non-Qt Helper function</span>

<div class="viewcode-block" id="ColumnListItemModel.get_data"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.get_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Non-Qt Helper &quot;&quot;&quot;</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="n">column</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">()</span>
        <span class="n">row_data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">row_data</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">row_sortx</span><span class="p">[</span><span class="n">row</span><span class="p">]]</span>
        <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="ColumnListItemModel.set_sorting"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.set_sorting">[docs]</a>    <span class="k">def</span> <span class="nf">set_sorting</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">col_sort_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span><span class="p">):</span>
        <span class="n">model</span><span class="o">.</span><span class="n">sortreverse</span> <span class="o">=</span> <span class="n">order</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DescendingOrder</span>
        <span class="k">if</span> <span class="n">col_sort_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">utool</span><span class="o">.</span><span class="n">is_str</span><span class="p">(</span><span class="n">col_sort_index</span><span class="p">):</span>
                <span class="n">col_sort_index</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">col_name_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">col_sort_index</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">utool</span><span class="o">.</span><span class="n">is_int</span><span class="p">(</span><span class="n">col_sort_index</span><span class="p">),</span> <span class="s1">&#39;sort by an index not </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span>
                <span class="n">col_sort_index</span>
            <span class="p">)</span>
            <span class="n">model</span><span class="o">.</span><span class="n">sortcolumn</span> <span class="o">=</span> <span class="n">col_sort_index</span>
            <span class="k">assert</span> <span class="n">model</span><span class="o">.</span><span class="n">sortcolumn</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">col_name_list</span><span class="p">),</span> <span class="s1">&#39;outofbounds&#39;</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sortcolumn: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">model</span><span class="o">.</span><span class="n">sortcolumn</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColumnListItemModel.set_data"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.set_data">[docs]</a>    <span class="k">def</span> <span class="nf">set_data</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Non-Qt Helper &quot;&quot;&quot;</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="n">column</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">()</span>
        <span class="n">row_data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">col_data_list</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
        <span class="n">row_data</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">row_sortx</span><span class="p">[</span><span class="n">row</span><span class="p">]]</span> <span class="o">=</span> <span class="n">data</span></div>

<div class="viewcode-block" id="ColumnListItemModel.get_header"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.get_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_header</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Non-Qt Helper &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">col_name_list</span><span class="p">[</span><span class="n">column</span><span class="p">]</span></div>

<div class="viewcode-block" id="ColumnListItemModel.get_header_data"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.get_header_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_header_data</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Non-Qt Helper &quot;&quot;&quot;</span>
        <span class="n">column</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">col_name_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="ColumnListItemModel.get_coltype"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.get_coltype">[docs]</a>    <span class="k">def</span> <span class="nf">get_coltype</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
        <span class="n">type_</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">col_type_list</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">type_</span></div>

<div class="viewcode-block" id="ColumnListItemModel.get_editable"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.get_editable">[docs]</a>    <span class="k">def</span> <span class="nf">get_editable</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">column_editable</span><span class="p">[</span><span class="n">column</span><span class="p">]</span></div>

<div class="viewcode-block" id="ColumnListItemModel.get_niceheader"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.get_niceheader">[docs]</a>    <span class="k">def</span> <span class="nf">get_niceheader</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Non-Qt Helper &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">niceheader_list</span><span class="p">[</span><span class="n">column</span><span class="p">]</span></div>

<div class="viewcode-block" id="ColumnListItemModel.get_column_alignment"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.get_column_alignment">[docs]</a>    <span class="k">def</span> <span class="nf">get_column_alignment</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
        <span class="n">coltype</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_coltype</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">coltype</span> <span class="ow">in</span> <span class="n">utool</span><span class="o">.</span><span class="n">VALID_FLOAT_TYPES</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">AlignHCenter</span></div>

    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># Qt AbstractItemTable Overrides</span>

<div class="viewcode-block" id="ColumnListItemModel.rowCount"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.rowCount">[docs]</a>    <span class="k">def</span> <span class="nf">rowCount</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QModelIndex</span><span class="p">()):</span>
        <span class="sd">&quot;&quot;&quot; Qt Override &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">row_sortx</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColumnListItemModel.columnCount"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.columnCount">[docs]</a>    <span class="k">def</span> <span class="nf">columnCount</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QModelIndex</span><span class="p">()):</span>
        <span class="sd">&quot;&quot;&quot; Qt Override &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">col_name_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColumnListItemModel.index"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.index">[docs]</a>    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QModelIndex</span><span class="p">()):</span>
        <span class="sd">&quot;&quot;&quot; Qt Override &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">createIndex</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColumnListItemModel.data"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.data">[docs]</a>    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the data to display &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">index</span><span class="o">.</span><span class="n">isValid</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">flags</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">flags</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">TextAlignmentRole</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">get_column_alignment</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">BackgroundRole</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">flags</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span> <span class="ow">or</span> <span class="n">flags</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsUserCheckable</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QVariant</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span> <span class="ow">or</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">CheckStateRole</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="n">var</span> <span class="o">=</span> <span class="n">qtype</span><span class="o">.</span><span class="n">cast_into_qt</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">var</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QVariant</span><span class="p">()</span></div>

<div class="viewcode-block" id="ColumnListItemModel.setData"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.setData">[docs]</a>    <span class="k">def</span> <span class="nf">setData</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">EditRole</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the role data for the item at index to var.</span>
<span class="sd">        var is a QVariant (called data in documentation)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;[model] setData: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">qtype</span><span class="o">.</span><span class="n">qindexinfo</span><span class="p">(</span><span class="n">index</span><span class="p">))))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">index</span><span class="o">.</span><span class="n">isValid</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">flags</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span> <span class="ow">or</span> <span class="n">flags</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsUserCheckable</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">CheckStateRole</span><span class="p">:</span>
                <span class="n">type_</span> <span class="o">=</span> <span class="s1">&#39;QtCheckState&#39;</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">var</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span>
            <span class="k">elif</span> <span class="n">role</span> <span class="o">!=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">EditRole</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Cast var into datatype</span>
                <span class="n">type_</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_coltype</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">())</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">qtype</span><span class="o">.</span><span class="n">cast_from_qt</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">type_</span><span class="p">)</span>
            <span class="c1"># Do actual setting of data</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; * new_data = </span><span class="si">%s</span><span class="s1">(</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">utool</span><span class="o">.</span><span class="n">type_str</span><span class="p">(</span><span class="n">type_</span><span class="p">),</span> <span class="n">data</span><span class="p">,))</span>
            <span class="n">model</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="c1"># Emit that data was changed and return succcess</span>
            <span class="n">model</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">var_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">toString</span><span class="p">())</span>  <span class="c1"># NOQA</span>
            <span class="n">utool</span><span class="o">.</span><span class="n">printex</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="s1">&#39;ignoring setData&#39;</span><span class="p">,</span> <span class="s1">&#39;[model]&#39;</span><span class="p">,</span> <span class="n">key_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;var_&#39;</span><span class="p">])</span>
            <span class="c1"># raise</span>
            <span class="c1"># print(&#39; * ignoring setData: %r&#39; % locals().get(&#39;var&#39;, None))</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ColumnListItemModel.headerData"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.headerData">[docs]</a>    <span class="k">def</span> <span class="nf">headerData</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Qt Override &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span> <span class="ow">and</span> <span class="n">orientation</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">get_niceheader</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QVariant</span><span class="p">()</span></div>

<div class="viewcode-block" id="ColumnListItemModel.sort"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.sort">[docs]</a>    <span class="k">def</span> <span class="nf">sort</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Qt Override &quot;&quot;&quot;</span>
        <span class="n">model</span><span class="o">.</span><span class="n">layoutAboutToBeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="n">model</span><span class="o">.</span><span class="n">set_sorting</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_change_row_indices</span><span class="p">()</span>
        <span class="n">model</span><span class="o">.</span><span class="n">layoutChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ColumnListItemModel.flags"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListItemModel.flags">[docs]</a>    <span class="k">def</span> <span class="nf">flags</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Qt Override &quot;&quot;&quot;</span>
        <span class="c1"># return Qt.ItemFlag(0)</span>
        <span class="n">column</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">model</span><span class="o">.</span><span class="n">get_editable</span><span class="p">(</span><span class="n">column</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEnabled</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsSelectable</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">get_coltype</span><span class="p">(</span><span class="n">column</span><span class="p">)</span> <span class="ow">in</span> <span class="n">utool</span><span class="o">.</span><span class="n">VALID_BOOL_TYPES</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEnabled</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsUserCheckable</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEnabled</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsSelectable</span></div></div>


<div class="viewcode-block" id="ColumnListTableWidget"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListTableWidget">[docs]</a><span class="k">class</span> <span class="nc">ColumnListTableWidget</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ColumnList Table Main Widget &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
        <span class="n">cltw</span><span class="p">,</span>
        <span class="n">col_data_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_name_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">niceheader_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_type_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_edit_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">display_indices</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">col_sort_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ColumnListTableWidget</span><span class="p">,</span> <span class="n">cltw</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="c1"># QtWidgets.QWidget.__init__(cltw, parent)</span>
        <span class="c1"># Create vertical layout for the table to go into</span>
        <span class="n">cltw</span><span class="o">.</span><span class="n">vert_layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">(</span><span class="n">cltw</span><span class="p">)</span>
        <span class="c1"># Instansiate the AbstractItemModel</span>
        <span class="n">cltw</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">ColumnListItemModel</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">cltw</span><span class="p">)</span>
        <span class="c1"># Create a ColumnListTableView for the AbstractItemModel</span>
        <span class="n">cltw</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">ColumnListTableView</span><span class="p">(</span><span class="n">cltw</span><span class="p">)</span>
        <span class="n">cltw</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">cltw</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="n">cltw</span><span class="o">.</span><span class="n">vert_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cltw</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="c1"># Make sure we don&#39;t call a childs method</span>
        <span class="n">ColumnListTableWidget</span><span class="o">.</span><span class="n">change_data</span><span class="p">(</span>
            <span class="n">cltw</span><span class="p">,</span>
            <span class="n">col_data_list</span><span class="p">,</span>
            <span class="n">col_name_list</span><span class="p">,</span>
            <span class="n">niceheader_list</span><span class="p">,</span>
            <span class="n">col_type_list</span><span class="p">,</span>
            <span class="n">col_edit_list</span><span class="p">,</span>
            <span class="n">display_indices</span><span class="p">,</span>
            <span class="n">col_sort_index</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="ColumnListTableWidget.change_data"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListTableWidget.change_data">[docs]</a>    <span class="k">def</span> <span class="nf">change_data</span><span class="p">(</span>
        <span class="n">cltw</span><span class="p">,</span>
        <span class="n">col_data_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_name_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">niceheader_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_type_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">col_edit_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">display_indices</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">col_sort_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks for deligates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">marked_columns</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># these will be persistantly editable</span>
        <span class="k">if</span> <span class="n">col_type_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cltw.change_data: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">col_type_list</span><span class="p">))</span>
            <span class="n">col_type_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">col_type_list</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">col_type_list</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col_type_list</span><span class="p">[</span><span class="n">column</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="n">delegate_type</span><span class="p">,</span> <span class="n">coltype</span> <span class="o">=</span> <span class="n">col_type_list</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
                    <span class="n">col_type_list</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">coltype</span>
                    <span class="k">if</span> <span class="n">cltw</span><span class="o">.</span><span class="n">set_column_as_delegate</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">delegate_type</span><span class="p">):</span>
                        <span class="n">marked_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cltw.change_data: None&#39;</span><span class="p">)</span>
        <span class="n">cltw</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_change_data</span><span class="p">(</span>
            <span class="n">col_data_list</span><span class="p">,</span>
            <span class="n">col_name_list</span><span class="p">,</span>
            <span class="n">niceheader_list</span><span class="p">,</span>
            <span class="n">col_type_list</span><span class="p">,</span>
            <span class="n">col_edit_list</span><span class="p">,</span>
            <span class="n">display_indices</span><span class="p">,</span>
            <span class="n">col_sort_index</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Set persistant editability after data is changed</span>
        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">marked_columns</span><span class="p">:</span>
            <span class="n">cltw</span><span class="o">.</span><span class="n">set_column_persistant_editor</span><span class="p">(</span><span class="n">column</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColumnListTableWidget.set_column_as_delegate"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListTableWidget.set_column_as_delegate">[docs]</a>    <span class="k">def</span> <span class="nf">set_column_as_delegate</span><span class="p">(</span><span class="n">cltw</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">delegate_type</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">delegate_type</span> <span class="o">==</span> <span class="s1">&#39;COMBO&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cltw.set_col_del </span><span class="si">%r</span><span class="s1"> </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">delegate_type</span><span class="p">))</span>
            <span class="n">cltw</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">ComboDelegate</span><span class="p">(</span><span class="n">cltw</span><span class="o">.</span><span class="n">view</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">delegate_type</span> <span class="o">==</span> <span class="s1">&#39;BUTTON&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cltw.set_col_del </span><span class="si">%r</span><span class="s1"> </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">delegate_type</span><span class="p">))</span>
            <span class="n">cltw</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">ButtonDelegate</span><span class="p">(</span><span class="n">cltw</span><span class="o">.</span><span class="n">view</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ColumnListTableWidget.set_column_persistant_editor"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListTableWidget.set_column_persistant_editor">[docs]</a>    <span class="k">def</span> <span class="nf">set_column_persistant_editor</span><span class="p">(</span><span class="n">cltw</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set each row in a column as persistant</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="n">cltw</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cltw.set_persistant: </span><span class="si">%r</span><span class="s1"> rows&#39;</span> <span class="o">%</span> <span class="n">num_rows</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_rows</span><span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">cltw</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>
            <span class="n">cltw</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">openPersistentEditor</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColumnListTableWidget.is_index_clickable"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListTableWidget.is_index_clickable">[docs]</a>    <span class="k">def</span> <span class="nf">is_index_clickable</span><span class="p">(</span><span class="n">cltw</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
        <span class="n">clickable</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">flags</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsSelectable</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">clickable</span></div>

<div class="viewcode-block" id="ColumnListTableWidget.get_index_header_data"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.ColumnListTableWidget.get_index_header_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_index_header_data</span><span class="p">(</span><span class="n">cltw</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">get_header_data</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="make_listtable_widget"><a class="viewcode-back" href="../../../wbia.guitool.html#wbia.guitool.guitool_tables.make_listtable_widget">[docs]</a><span class="k">def</span> <span class="nf">make_listtable_widget</span><span class="p">(</span>
    <span class="n">col_data_list</span><span class="p">,</span>
    <span class="n">col_name_list</span><span class="p">,</span>
    <span class="n">col_edit_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">raise_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">on_click</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">widget</span> <span class="o">=</span> <span class="n">ColumnListTableWidget</span><span class="p">(</span>
        <span class="n">col_data_list</span><span class="p">,</span> <span class="n">col_name_list</span><span class="p">,</span> <span class="n">col_edit_list</span><span class="o">=</span><span class="n">col_edit_list</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_doubleclick</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
        <span class="c1"># This is actually a release</span>
        <span class="c1"># print(&#39;DoubleClicked: &#39; + str(qtype.qindexinfo(index)))</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">on_pressed</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
        <span class="c1"># print(&#39;Pressed: &#39; + str(qtype.qindexinfo(index)))</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">on_activated</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
        <span class="c1"># print(&#39;Activated: &#39; + str(qtype.qindexinfo(index)))</span>
        <span class="k">pass</span>

    <span class="k">if</span> <span class="n">on_click</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">on_click</span><span class="p">)</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">doubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">on_doubleclick</span><span class="p">)</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">on_doubleclick</span><span class="p">)</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">activated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">on_activated</span><span class="p">)</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">raise_</span><span class="p">:</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">widget</span></div>


<span class="c1"># if __name__ == &#39;__main__&#39;:</span>
<span class="c1"># import sys</span>
<span class="c1"># app = guitoo.ensure_qtapp()</span>
<span class="c1"># widget = DummyWidget()</span>
<span class="c1"># widget.show()</span>
<span class="c1"># widget.raise_()</span>
<span class="c1"># sys.exit(app.exec_())</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CommandLine:</span>
<span class="sd">        python -m wbia.guitool.guitool_tables</span>
<span class="sd">        python -m wbia.guitool.guitool_tables --allexamples</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">multiprocessing</span>

    <span class="n">multiprocessing</span><span class="o">.</span><span class="n">freeze_support</span><span class="p">()</span>  <span class="c1"># for win32</span>
    <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>  <span class="c1"># NOQA</span>

    <span class="n">ut</span><span class="o">.</span><span class="n">doctest_funcs</span><span class="p">()</span>
</pre></div>

          </div>

        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">wbia</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../wbia.html">wbia - Wildbook IA</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  <li><a href="../../wbia.html">wbia</a><ul>
  <li><a href="../guitool.html">wbia.guitool</a><ul>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Wild Me.

      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>

    </div>




  </body>
</html>
