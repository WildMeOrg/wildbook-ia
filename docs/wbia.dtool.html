
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>wbia.dtool package &#8212; wbia 2.2.4 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />

  <link rel="stylesheet" href="_static/custom.css" type="text/css" />


  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">


          <div class="body" role="main">

  <div class="section" id="wbia-dtool-package">
<h1>wbia.dtool package<a class="headerlink" href="#wbia-dtool-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-wbia.dtool.__SQLITE__">
<span id="wbia-dtool-sqlite-module"></span><h2>wbia.dtool.__SQLITE__ module<a class="headerlink" href="#module-wbia.dtool.__SQLITE__" title="Permalink to this headline">¶</a></h2>
<p>custom sqlite3 module that supports numpy types</p>
</div>
<div class="section" id="module-wbia.dtool.__main__">
<span id="wbia-dtool-main-module"></span><h2>wbia.dtool.__main__ module<a class="headerlink" href="#module-wbia.dtool.__main__" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Initially Generated By:</dt>
<dd>python -m utool –tf setup_repo –repo=dtool –codedir=~/code –modname=dtool</dd>
</dl>
<dl class="function">
<dt id="wbia.dtool.__main__.dtool_main">
<code class="descclassname">wbia.dtool.__main__.</code><code class="descname">dtool_main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/__main__.html#dtool_main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.__main__.dtool_main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="wbia-dtool-grave-depcache-module">
<h2>wbia.dtool._grave_depcache module<a class="headerlink" href="#wbia-dtool-grave-depcache-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-wbia.dtool.base">
<span id="wbia-dtool-base-module"></span><h2>wbia.dtool.base module<a class="headerlink" href="#module-wbia.dtool.base" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wbia.dtool.base.AlgoResult">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">AlgoResult</code><a class="reference internal" href="_modules/wbia/dtool/base.html#AlgoResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.AlgoResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for algo result objects</p>
<dl class="method">
<dt id="wbia.dtool.base.AlgoResult.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#AlgoResult.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.AlgoResult.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="wbia.dtool.base.AlgoResult.load_from_fpath">
<em class="property">classmethod </em><code class="descname">load_from_fpath</code><span class="sig-paren">(</span><em>fpath</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#AlgoResult.load_from_fpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.AlgoResult.load_from_fpath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.AlgoResult.save_to_fpath">
<code class="descname">save_to_fpath</code><span class="sig-paren">(</span><em>fpath</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#AlgoResult.save_to_fpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.AlgoResult.save_to_fpath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.AnnotSimiliarity">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">AnnotSimiliarity</code><a class="reference internal" href="_modules/wbia/dtool/base.html#AnnotSimiliarity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.AnnotSimiliarity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="wbia.dtool.base.AnnotSimiliarity.get_data_hashid">
<code class="descname">get_data_hashid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#AnnotSimiliarity.get_data_hashid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.AnnotSimiliarity.get_data_hashid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.AnnotSimiliarity.get_query_hashid">
<code class="descname">get_query_hashid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#AnnotSimiliarity.get_query_hashid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.AnnotSimiliarity.get_query_hashid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.BaseRequest">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">BaseRequest</code><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.IBEISRequestHacks" title="wbia.dtool.base.IBEISRequestHacks"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.IBEISRequestHacks</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dev.NiceRepr</span></code></p>
<p>Class that maintains both an algorithm, inputs, and a config.</p>
<dl class="method">
<dt id="wbia.dtool.base.BaseRequest.ensure_dependencies">
<code class="descname">ensure_dependencies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest.ensure_dependencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest.ensure_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.base –exec-BaseRequest.ensure_dependencies</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">new_request</span><span class="p">(</span><span class="s1">&#39;vsmany&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">ensure_dependencies</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.BaseRequest.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>parent_rowids=None</em>, <em>use_cache=None</em>, <em>postprocess=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.BaseRequest.get_cfgstr">
<code class="descname">get_cfgstr</code><span class="sig-paren">(</span><em>with_input=False</em>, <em>with_pipe=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest.get_cfgstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest.get_cfgstr" title="Permalink to this definition">¶</a></dt>
<dd><p>main cfgstring used to identify the ‘querytype’</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.BaseRequest.get_input_hashid">
<code class="descname">get_input_hashid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest.get_input_hashid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest.get_input_hashid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.BaseRequest.get_pipe_cfgstr">
<code class="descname">get_pipe_cfgstr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest.get_pipe_cfgstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest.get_pipe_cfgstr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.BaseRequest.get_pipe_hashid">
<code class="descname">get_pipe_hashid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest.get_pipe_hashid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest.get_pipe_hashid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="wbia.dtool.base.BaseRequest.new">
<em class="property">classmethod </em><code class="descname">new</code><span class="sig-paren">(</span><em>depc</em>, <em>parent_rowids</em>, <em>cfgdict=None</em>, <em>tablename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest.new"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest.new" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.BaseRequest.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.base.BaseRequest.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

<dl class="staticmethod">
<dt id="wbia.dtool.base.BaseRequest.static_new">
<em class="property">static </em><code class="descname">static_new</code><span class="sig-paren">(</span><em>cls</em>, <em>depc</em>, <em>parent_rowids</em>, <em>cfgdict=None</em>, <em>tablename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#BaseRequest.static_new"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.BaseRequest.static_new" title="Permalink to this definition">¶</a></dt>
<dd><p>hack for autoreload</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.ClassVsClassSimilarityRequest">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">ClassVsClassSimilarityRequest</code><a class="reference internal" href="_modules/wbia/dtool/base.html#ClassVsClassSimilarityRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.ClassVsClassSimilarityRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.BaseRequest" title="wbia.dtool.base.BaseRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.BaseRequest</span></code></a></p>
<dl class="method">
<dt id="wbia.dtool.base.ClassVsClassSimilarityRequest.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.base.ClassVsClassSimilarityRequest.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.Config">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">Config</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dev.NiceRepr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dict.DictLike</span></code></p>
<p>Base class for heirarchical config
need to overwrite get_param_info_list</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.base Config</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg1</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg2</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Must be hashable and orderable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hash</span><span class="p">(</span><span class="n">cfg1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg1</span> <span class="o">&gt;</span> <span class="n">cfg2</span>
</pre></div>
</div>
<dl class="method">
<dt id="wbia.dtool.base.Config.assert_self_types">
<code class="descname">assert_self_types</code><span class="sig-paren">(</span><em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.assert_self_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.assert_self_types" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="wbia.dtool.base.Config.class_from_dict">
<em class="property">classmethod </em><code class="descname">class_from_dict</code><span class="sig-paren">(</span><em>dict_</em>, <em>tablename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.class_from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.class_from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.deepcopy">
<code class="descname">deepcopy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.deepcopy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.deepcopy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="wbia.dtool.base.Config.from_argv_cfgs">
<em class="property">classmethod </em><code class="descname">from_argv_cfgs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.from_argv_cfgs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.from_argv_cfgs" title="Permalink to this definition">¶</a></dt>
<dd><p>handy command line tool</p>
</dd></dl>

<dl class="classmethod">
<dt id="wbia.dtool.base.Config.from_argv_dict">
<em class="property">classmethod </em><code class="descname">from_argv_dict</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.from_argv_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.from_argv_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>handy command line tool
ut.parse_argv_cfg</p>
</dd></dl>

<dl class="classmethod">
<dt id="wbia.dtool.base.Config.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>dict_</em>, <em>tablename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dict</strong> (<a href="#id1"><span class="problematic" id="id2">dict_</span></a>) – a dictionary</li>
<li><strong>tablename</strong> (<em>None</em>) – (default = None)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">param_info_list</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.base Config.from_dict –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">cls</span> <span class="o">=</span> <span class="n">Config</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;K&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Knorm&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;min_pername&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;max_pername&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">dict_</span><span class="p">,</span> <span class="n">tablename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(--show)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">quit_if_noshow</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dlg</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">make_qt_dialog</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Confirm Merge Query&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;Confirm&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dlg</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">700</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia.plottool</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">widget</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">guitool</span><span class="o">.</span><span class="n">qtapp_loop</span><span class="p">(</span><span class="n">qwin</span><span class="o">=</span><span class="n">dlg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">updated_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;updated_config = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">updated_config</span><span class="p">,))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em>, <em>*d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get" title="Permalink to this definition">¶</a></dt>
<dd><p>get a paramater value by string</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get_cfgstr">
<code class="descname">get_cfgstr</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get_cfgstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get_cfgstr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get_cfgstr_list">
<code class="descname">get_cfgstr_list</code><span class="sig-paren">(</span><em>ignore_keys=None</em>, <em>with_name=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get_cfgstr_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get_cfgstr_list" title="Permalink to this definition">¶</a></dt>
<dd><p>default get_cfgstr_list, can be overrided by a config object</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get_config_name">
<code class="descname">get_config_name</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get_config_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get_config_name" title="Permalink to this definition">¶</a></dt>
<dd><p>the user might want to overwrite this function</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get_hashid">
<code class="descname">get_hashid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get_hashid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get_hashid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get_param_info_dict">
<code class="descname">get_param_info_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get_param_info_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get_param_info_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get_param_info_list">
<code class="descname">get_param_info_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get_param_info_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get_param_info_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get_sub_config_list">
<code class="descname">get_sub_config_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get_sub_config_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get_sub_config_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.get_varnames">
<code class="descname">get_varnames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.get_varnames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.get_varnames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.getinfo">
<code class="descname">getinfo</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.getinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.getinfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.getitem">
<code class="descname">getitem</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.getitem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.getitem" title="Permalink to this definition">¶</a></dt>
<dd><p>Required for DictLike interface</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.getstate_todict_recursive">
<code class="descname">getstate_todict_recursive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.getstate_todict_recursive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.getstate_todict_recursive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.initialize_params">
<code class="descname">initialize_params</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.initialize_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.initialize_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes config class attributes based on params info list</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Required for DictLike interface</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.make_qt_dialog">
<code class="descname">make_qt_dialog</code><span class="sig-paren">(</span><em>parent=None</em>, <em>title='Edit Config'</em>, <em>msg='Confim'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.make_qt_dialog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.make_qt_dialog" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.native_items">
<code class="descname">native_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.native_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.native_items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.nested_items">
<code class="descname">nested_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.nested_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.nested_items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.parse_items">
<code class="descname">parse_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.parse_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.parse_items" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">param_list</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.base –exec-parse_items</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">DummyVsManyConfig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">DummyVsManyConfig</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">param_list</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">parse_items</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;param_list = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">param_list</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="mi">1</span><span class="p">),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.parse_namespace_config_items">
<code class="descname">parse_namespace_config_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.parse_namespace_config_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.parse_namespace_config_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extracts key, val pairs from Config objects
into a flat list. (there must not be name conflicts)</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.pop_update">
<code class="descname">pop_update</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.pop_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.pop_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates based on other, while popping off used arguments.
(useful for testing if a parameter was unused or misspelled)</p>
<dl class="docutils">
<dt>Doctest:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia</span> <span class="k">import</span> <span class="n">dtool</span> <span class="k">as</span> <span class="n">dt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">pop_update</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s1">&#39;a&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">other</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.setitem">
<code class="descname">setitem</code><span class="sig-paren">(</span><em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.setitem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.setitem" title="Permalink to this definition">¶</a></dt>
<dd><p>Required for DictLike interface</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Overwrites default DictLike update for only keys that exist.
Non-existing key are ignored.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">prefixed keys in the form &lt;classname&gt;_&lt;key&gt; will be just be
interpreted as &lt;key&gt;</p>
</div>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.base update –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">DummyVsManyConfig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">DummyVsManyConfig</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">DummyAlgo_version</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.Config.update2">
<code class="descname">update2</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#Config.update2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.Config.update2" title="Permalink to this definition">¶</a></dt>
<dd><p>Overwrites default DictLike update for only keys that exist.
Non-existing key are ignored.
Also updates nested configs.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">prefixed keys in the form &lt;classname&gt;_&lt;key&gt; will be just be
interpreted as &lt;key&gt;</p>
</div>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.base update –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia</span> <span class="k">import</span> <span class="n">dtool</span> <span class="k">as</span> <span class="n">dt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;sub1&#39;</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">}),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;sub2&#39;</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;sub3&#39;</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">88</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">}),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">}),</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">update2</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cfg</span><span class="o">.</span><span class="n">c</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cfg</span><span class="o">.</span><span class="n">sub1</span><span class="o">.</span><span class="n">c</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cfg</span><span class="o">.</span><span class="n">sub2</span><span class="o">.</span><span class="n">c</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cfg</span><span class="o">.</span><span class="n">sub2</span><span class="o">.</span><span class="n">sub3</span><span class="o">.</span><span class="n">c</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cfg</span><span class="o">.</span><span class="n">sub1</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.IBEISRequestHacks">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">IBEISRequestHacks</code><a class="reference internal" href="_modules/wbia/dtool/base.html#IBEISRequestHacks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.IBEISRequestHacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="wbia.dtool.base.IBEISRequestHacks.dannots">
<code class="descname">dannots</code><a class="headerlink" href="#wbia.dtool.base.IBEISRequestHacks.dannots" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.base.IBEISRequestHacks.extern_data_config2">
<code class="descname">extern_data_config2</code><a class="headerlink" href="#wbia.dtool.base.IBEISRequestHacks.extern_data_config2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.base.IBEISRequestHacks.extern_query_config2">
<code class="descname">extern_query_config2</code><a class="headerlink" href="#wbia.dtool.base.IBEISRequestHacks.extern_query_config2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.IBEISRequestHacks.get_qreq_annot_nids">
<code class="descname">get_qreq_annot_nids</code><span class="sig-paren">(</span><em>aids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#IBEISRequestHacks.get_qreq_annot_nids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.IBEISRequestHacks.get_qreq_annot_nids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.base.IBEISRequestHacks.ibs">
<code class="descname">ibs</code><a class="headerlink" href="#wbia.dtool.base.IBEISRequestHacks.ibs" title="Permalink to this definition">¶</a></dt>
<dd><p>HACK specific to wbia</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.base.IBEISRequestHacks.qannots">
<code class="descname">qannots</code><a class="headerlink" href="#wbia.dtool.base.IBEISRequestHacks.qannots" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.MatchResult">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">MatchResult</code><span class="sig-paren">(</span><em>qaid=None</em>, <em>daids=None</em>, <em>qnid=None</em>, <em>dnid_list=None</em>, <em>annot_score_list=None</em>, <em>unique_nids=None</em>, <em>name_score_list=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#MatchResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.MatchResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.AlgoResult" title="wbia.dtool.base.AlgoResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.AlgoResult</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dev.NiceRepr</span></code></p>
<dl class="attribute">
<dt id="wbia.dtool.base.MatchResult.daids">
<code class="descname">daids</code><a class="headerlink" href="#wbia.dtool.base.MatchResult.daids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.base.MatchResult.num_daids">
<code class="descname">num_daids</code><a class="headerlink" href="#wbia.dtool.base.MatchResult.num_daids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.base.MatchResult.qaids">
<code class="descname">qaids</code><a class="headerlink" href="#wbia.dtool.base.MatchResult.qaids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.StackedConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">StackedConfig</code><span class="sig-paren">(</span><em>config_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#StackedConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.StackedConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dict.DictLike</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_class.HashComparable</span></code></p>
<p>Manages a list of configurations</p>
<dl class="method">
<dt id="wbia.dtool.base.StackedConfig.get_cfgstr">
<code class="descname">get_cfgstr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#StackedConfig.get_cfgstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.StackedConfig.get_cfgstr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.StackedConfig.getitem">
<code class="descname">getitem</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#StackedConfig.getitem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.StackedConfig.getitem" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.StackedConfig.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#StackedConfig.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.StackedConfig.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.VsManySimilarityRequest">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">VsManySimilarityRequest</code><a class="reference internal" href="_modules/wbia/dtool/base.html#VsManySimilarityRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsManySimilarityRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.BaseRequest" title="wbia.dtool.base.BaseRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.BaseRequest</span></code></a>, <a class="reference internal" href="#wbia.dtool.base.AnnotSimiliarity" title="wbia.dtool.base.AnnotSimiliarity"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.AnnotSimiliarity</span></code></a></p>
<p>Request for one-vs-many simlarity</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.base –exec-VsManySimilarityRequest</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qaid_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daid_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">new_request</span><span class="p">(</span><span class="s1">&#39;vsmany&#39;</span><span class="p">,</span> <span class="n">qaid_list</span><span class="p">,</span> <span class="n">daid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">ensure_dependencies</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Test dependence on data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request2</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">new_request</span><span class="p">(</span><span class="s1">&#39;vsmany&#39;</span><span class="p">,</span> <span class="n">qaid_list</span> <span class="o">+</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">daid_list</span> <span class="o">+</span> <span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results2</span> <span class="o">=</span> <span class="n">request2</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;results = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">results</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;results2 = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">results2</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;incorrect num output&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">results2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;incorrect num output&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="wbia.dtool.base.VsManySimilarityRequest.get_cfgstr">
<code class="descname">get_cfgstr</code><span class="sig-paren">(</span><em>with_input=False</em>, <em>with_data=True</em>, <em>with_pipe=True</em>, <em>hash_pipe=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#VsManySimilarityRequest.get_cfgstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsManySimilarityRequest.get_cfgstr" title="Permalink to this definition">¶</a></dt>
<dd><p>Override default get_cfgstr to show reliance on data</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.VsManySimilarityRequest.get_input_hashid">
<code class="descname">get_input_hashid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#VsManySimilarityRequest.get_input_hashid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsManySimilarityRequest.get_input_hashid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="wbia.dtool.base.VsManySimilarityRequest.new">
<em class="property">classmethod </em><code class="descname">new</code><span class="sig-paren">(</span><em>depc</em>, <em>qaid_list</em>, <em>daid_list</em>, <em>cfgdict=None</em>, <em>tablename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#VsManySimilarityRequest.new"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsManySimilarityRequest.new" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.VsManySimilarityRequest.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.base.VsManySimilarityRequest.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.base.VsOneSimilarityRequest">
<em class="property">class </em><code class="descclassname">wbia.dtool.base.</code><code class="descname">VsOneSimilarityRequest</code><a class="reference internal" href="_modules/wbia/dtool/base.html#VsOneSimilarityRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsOneSimilarityRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.BaseRequest" title="wbia.dtool.base.BaseRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.BaseRequest</span></code></a>, <a class="reference internal" href="#wbia.dtool.base.AnnotSimiliarity" title="wbia.dtool.base.AnnotSimiliarity"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.AnnotSimiliarity</span></code></a></p>
<p>Similarity request for pairwise scores</p>
<p class="rubric">References</p>
<p><a class="reference external" href="https://thingspython.wordpress.com/2010/09/27/">https://thingspython.wordpress.com/2010/09/27/</a>
another-super-wrinkle-raising-typeerror/</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.base –exec-VsOneSimilarityRequest</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.base</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qaid_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daid_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">new_request</span><span class="p">(</span><span class="s1">&#39;vsone&#39;</span><span class="p">,</span> <span class="n">qaid_list</span><span class="p">,</span> <span class="n">daid_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Test that adding a query / data id only recomputes necessary items</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request2</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">new_request</span><span class="p">(</span><span class="s1">&#39;vsone&#39;</span><span class="p">,</span> <span class="n">qaid_list</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">daid_list</span> <span class="o">+</span> <span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results2</span> <span class="o">=</span> <span class="n">request2</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;results = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">results</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;results2 = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">results2</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">assert_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">),</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;incorrect num output&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">assert_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">results2</span><span class="p">),</span> <span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;incorrect num output&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="wbia.dtool.base.VsOneSimilarityRequest.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>parent_rowids=None</em>, <em>use_cache=None</em>, <em>postprocess=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#VsOneSimilarityRequest.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsOneSimilarityRequest.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>HACKY REIMPLEMENTATION</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.VsOneSimilarityRequest.get_input_hashid">
<code class="descname">get_input_hashid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#VsOneSimilarityRequest.get_input_hashid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsOneSimilarityRequest.get_input_hashid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="wbia.dtool.base.VsOneSimilarityRequest.make_parent_rowids">
<em class="property">static </em><code class="descname">make_parent_rowids</code><span class="sig-paren">(</span><em>qaid_list</em>, <em>daid_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#VsOneSimilarityRequest.make_parent_rowids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsOneSimilarityRequest.make_parent_rowids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="wbia.dtool.base.VsOneSimilarityRequest.new">
<em class="property">classmethod </em><code class="descname">new</code><span class="sig-paren">(</span><em>depc</em>, <em>qaid_list</em>, <em>daid_list</em>, <em>cfgdict=None</em>, <em>tablename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#VsOneSimilarityRequest.new"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.VsOneSimilarityRequest.new" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.base.VsOneSimilarityRequest.parent_rowids_T">
<code class="descname">parent_rowids_T</code><a class="headerlink" href="#wbia.dtool.base.VsOneSimilarityRequest.parent_rowids_T" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.base.VsOneSimilarityRequest.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.base.VsOneSimilarityRequest.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="wbia.dtool.base.config_graph_subattrs">
<code class="descclassname">wbia.dtool.base.</code><code class="descname">config_graph_subattrs</code><span class="sig-paren">(</span><em>cfg</em>, <em>depc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#config_graph_subattrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.config_graph_subattrs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="wbia.dtool.base.from_param_info_list">
<code class="descclassname">wbia.dtool.base.</code><code class="descname">from_param_info_list</code><span class="sig-paren">(</span><em>param_info_list</em>, <em>tablename='Unnamed'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#from_param_info_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.from_param_info_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="wbia.dtool.base.make_configclass">
<code class="descclassname">wbia.dtool.base.</code><code class="descname">make_configclass</code><span class="sig-paren">(</span><em>dict_</em>, <em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#make_configclass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.make_configclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a custom config class from a dict</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.base.safeop">
<code class="descclassname">wbia.dtool.base.</code><code class="descname">safeop</code><span class="sig-paren">(</span><em>op_</em>, <em>xs</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/base.html#safeop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.base.safeop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-wbia.dtool.depcache_control">
<span id="wbia-dtool-depcache-control-module"></span><h2>wbia.dtool.depcache_control module<a class="headerlink" href="#module-wbia.dtool.depcache_control" title="Permalink to this headline">¶</a></h2>
<p>implicit version of dependency cache from wbia/templates/template_generator</p>
<dl class="class">
<dt id="wbia.dtool.depcache_control.DependencyCache">
<em class="property">class </em><code class="descclassname">wbia.dtool.depcache_control.</code><code class="descname">DependencyCache</code><span class="sig-paren">(</span><em>root_tablename=None</em>, <em>cache_dpath='./DEPCACHE'</em>, <em>controller=None</em>, <em>default_fname=None</em>, <em>get_root_uuid=None</em>, <em>root_getters=None</em>, <em>use_globals=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.depcache_control._CoreDependencyCache</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dev.NiceRepr</span></code></p>
<dl class="docutils">
<dt>Currently, to use this class a user must:</dt>
<dd><ul class="first last simple">
<li>on root modification, call depc.on_root_modified</li>
<li>use decorators to register relevant functions</li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.clear_all">
<code class="descname">clear_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.clear_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.clear_all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.delete_root">
<code class="descname">delete_root</code><span class="sig-paren">(</span><em>root_rowids</em>, <em>delete_extern=None</em>, <em>_debug=False</em>, <em>table_config_filter=None</em>, <em>prop=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.delete_root"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.delete_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all properties of a root object regardless of config</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>root_rowids</strong> (<em>list</em>) – </td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.depcache_control delete_root –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">depc</span><span class="o">.</span><span class="n">delete_root</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root_rowids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">delete_root</span><span class="p">(</span><span class="n">root_rowids</span><span class="p">,</span> <span class="n">_debug</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fgweight&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">delete_root</span><span class="p">(</span><span class="n">root_rowids</span><span class="p">,</span> <span class="n">_debug</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_control.DependencyCache.explicit_graph">
<code class="descname">explicit_graph</code><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.explicit_graph" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.get_allconfig_descendant_rowids">
<code class="descname">get_allconfig_descendant_rowids</code><span class="sig-paren">(</span><em>root_rowids</em>, <em>table_config_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.get_allconfig_descendant_rowids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.get_allconfig_descendant_rowids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.get_edges">
<code class="descname">get_edges</code><span class="sig-paren">(</span><em>data=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.get_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.get_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>edges for networkx structure</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.get_implicit_edges">
<code class="descname">get_implicit_edges</code><span class="sig-paren">(</span><em>data=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.get_implicit_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.get_implicit_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Edges defined by subconfigurations</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.get_native_property">
<code class="descname">get_native_property</code><span class="sig-paren">(</span><em>tablename</em>, <em>tbl_rowids</em>, <em>colnames=None</em>, <em>_debug=None</em>, <em>read_extern=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.get_native_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets data using internal ids, which is faster if you have them.</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.depcache_control get_native:0
python -m dtool.depcache_control get_native:1</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Simple test of get native</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;keypoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl_rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_native</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">tbl_rowids</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;chip&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colnames</span> <span class="o">=</span> <span class="n">extern_colname</span> <span class="o">=</span> <span class="s1">&#39;chip&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">delete_property</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Ensure chip rowids exist then delete external data without</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># notifying the depcache. This forces the depcache to recover</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl_rowids</span> <span class="o">=</span> <span class="n">chip_rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_fpaths</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">extern_colname</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">read_extern</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">remove_file_list</span><span class="p">(</span><span class="n">data_fpaths</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chips</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_native</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">tbl_rowids</span><span class="p">,</span> <span class="n">extern_colname</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;chips = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">chips</span><span class="p">,))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.get_property">
<code class="descname">get_property</code><span class="sig-paren">(</span><em>tablename</em>, <em>root_rowids</em>, <em>colnames=None</em>, <em>config=None</em>, <em>ensure=True</em>, <em>_debug=None</em>, <em>recompute=False</em>, <em>recompute_all=False</em>, <em>eager=True</em>, <em>nInput=None</em>, <em>read_extern=True</em>, <em>onthefly=False</em>, <em>num_retries=1</em>, <em>hack_paths=False</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.get_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Access dependant properties the primary objects using primary ids.</p>
<p>Gets the data in <cite>colnames</cite> of <cite>tablename</cite> that correspond to
<cite>root_rowids</cite> using <cite>config</cite>.  if colnames is None, all columns are
returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tablename</strong> (<em>str</em>) – table name containing desired property</li>
<li><strong>root_rowids</strong> (<em>List</em><em>[</em><em>int</em><em>]</em>) – ids of the root object</li>
<li><strong>colnames</strong> (<em>None</em>) – desired property (default = None)</li>
<li><strong>config</strong> (<em>None</em>) – (default = None)</li>
<li><strong>read_extern</strong> – if False then only returns extern URI</li>
<li><strong>hack_paths</strong> – if False then does not compute extern info just returns
path that it will be located at</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">prop_list</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.depcache_control –exec-get</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_debug</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;labeler&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root_rowids</span> <span class="o">=</span> <span class="n">aids</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tablename</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">colnames</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;prop_list = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">prop_list</span><span class="p">),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">prop_list = [(&#39;labeler([root(1)]:42)&#39;,), (&#39;labeler([root(2)]:42)&#39;,), (&#39;labeler([root(3)]:42)&#39;,)]</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_debug</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;smk_match&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;vocab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root_rowids</span> <span class="o">=</span> <span class="p">[</span><span class="n">aids</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tablename</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;prop_list = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">prop_list</span><span class="p">),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">prop_list = [(&#39;vocab([root(1;2;3)]:42)&#39;,)]</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_debug</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;chip&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root_rowids</span> <span class="o">=</span> <span class="n">aids</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Ensure chips are computed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list1</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get file paths and delete them</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list2</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">read_extern</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">remove_file_list</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">take_column</span><span class="p">(</span><span class="n">prop_list2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">prop_list2</span><span class="p">),</span> <span class="s1">&#39;files were not computed&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list3</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">prop_list1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">prop_list3</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="s1">&#39;computed same info&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.get_tablenames">
<code class="descname">get_tablenames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.get_tablenames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.get_tablenames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.get_uuids">
<code class="descname">get_uuids</code><span class="sig-paren">(</span><em>tablename</em>, <em>root_rowids</em>, <em>config=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.get_uuids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.get_uuids" title="Permalink to this definition">¶</a></dt>
<dd><p># TODO: Make uuids for dependant object based on root uuid and path of
# construction.</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_control.DependencyCache.graph">
<code class="descname">graph</code><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.graph" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.make_graph">
<code class="descname">make_graph</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.make_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.make_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a networkx representation of the dependency graph</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd><p class="first">python -m dtool –tf DependencyCache.make_graph –show –reduced</p>
<p>python -m wbia.control.IBEISControl show_depc_annot_graph –show –reduced</p>
<p>python -m wbia.control.IBEISControl show_depc_annot_graph –show –reduced –testmode
python -m wbia.control.IBEISControl show_depc_annot_graph –show –testmode</p>
<p>python -m wbia.control.IBEISControl –test-show_depc_image_graph –show –reduced
python -m wbia.control.IBEISControl –test-show_depc_image_graph –show</p>
<p class="last">python -m wbia.scripts.specialdraw double_depcache_graph –show –testmode</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">make_graph</span><span class="p">(</span><span class="n">reduced</span><span class="o">=</span><span class="n">ut</span><span class="o">.</span><span class="n">get_argflag</span><span class="p">(</span><span class="s1">&#39;--reduced&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">quit_if_noshow</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia.plottool</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pt</span><span class="o">.</span><span class="n">ensureqt</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#pt.show_nx(nx.dag.transitive_closure(graph))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#pt.show_nx(ut.nx_transitive_reduction(graph))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pt</span><span class="o">.</span><span class="n">show_nx</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pt</span><span class="o">.</span><span class="n">show_nx</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s1">&#39;agraph&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">show_if_requested</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">make_graph</span><span class="p">(</span><span class="n">reduced</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(--show)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">quit_if_noshow</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia.plottool</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pt</span><span class="o">.</span><span class="n">ensureqt</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#pt.show_nx(nx.dag.transitive_closure(graph))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#pt.show_nx(ut.nx_transitive_reduction(graph))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pt</span><span class="o">.</span><span class="n">show_nx</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pt</span><span class="o">.</span><span class="n">show_nx</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s1">&#39;agraph&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">show_if_requested</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.make_root_info_uuid">
<code class="descname">make_root_info_uuid</code><span class="sig-paren">(</span><em>root_rowids</em>, <em>info_props</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.make_root_info_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.make_root_info_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a uuid that depends on certain properties of the root object.
This is used for implicit cache invalidation because, if those
properties change then this uuid also changes.</p>
<p>The depcache needs to know about stateful properties of dynamic root
objects in order to correctly compute their hashes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#ibs = wbia.opendb(defaultdb=&#39;testdb1&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root_rowids</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">_get_all_aids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">depc_annot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">info_props</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;image_uuid&#39;</span><span class="p">,</span> <span class="s1">&#39;verts&#39;</span><span class="p">,</span> <span class="s1">&#39;theta&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">info_props</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;image_uuid&#39;</span><span class="p">,</span> <span class="s1">&#39;verts&#39;</span><span class="p">,</span> <span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;species&#39;</span><span class="p">,</span> <span class="s1">&#39;yaw&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.notify_root_changed">
<code class="descname">notify_root_changed</code><span class="sig-paren">(</span><em>root_rowids</em>, <em>prop</em>, <em>force_delete=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.notify_root_changed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.notify_root_changed" title="Permalink to this definition">¶</a></dt>
<dd><p>this is where we are notified that a “registered” root property has
changed.</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.print_all_tables">
<code class="descname">print_all_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.print_all_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.print_all_tables" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.print_config_tables">
<code class="descname">print_config_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.print_config_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.print_config_tables" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.print_schemas">
<code class="descname">print_schemas</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.print_schemas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.print_schemas" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.print_table">
<code class="descname">print_table</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.print_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.print_table" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_control.DependencyCache.reduced_graph">
<code class="descname">reduced_graph</code><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.reduced_graph" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.register_delete_table_exclusion">
<code class="descname">register_delete_table_exclusion</code><span class="sig-paren">(</span><em>tablename</em>, <em>prop</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.register_delete_table_exclusion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.register_delete_table_exclusion" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_control.DependencyCache.root">
<code class="descname">root</code><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.root" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.show_graph">
<code class="descname">show_graph</code><span class="sig-paren">(</span><em>reduced=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.show_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.show_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper “fluff” function</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_control.DependencyCache.stacked_config">
<code class="descname">stacked_config</code><span class="sig-paren">(</span><em>source</em>, <em>dest</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#DependencyCache.stacked_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.stacked_config" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.depcache_control stacked_config –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">root</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dest</span> <span class="o">=</span> <span class="s1">&#39;fgweight&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stacked_config</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">stacked_config</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfgstr</span> <span class="o">=</span> <span class="n">stacked_config</span><span class="o">.</span><span class="n">get_cfgstr</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;cfgstr = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">cfgstr</span><span class="p">),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_control.DependencyCache.tablenames">
<code class="descname">tablenames</code><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.tablenames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_control.DependencyCache.tables">
<code class="descname">tables</code><a class="headerlink" href="#wbia.dtool.depcache_control.DependencyCache.tables" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="wbia.dtool.depcache_control.check_register">
<code class="descclassname">wbia.dtool.depcache_control.</code><code class="descname">check_register</code><span class="sig-paren">(</span><em>args</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#check_register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.check_register" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="wbia.dtool.depcache_control.make_depcache_decors">
<code class="descclassname">wbia.dtool.depcache_control.</code><code class="descname">make_depcache_decors</code><span class="sig-paren">(</span><em>root_tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_control.html#make_depcache_decors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_control.make_depcache_decors" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes global decorators to register functions for a tablename.</p>
<p>A preproc function is meant to belong only to a single parent An algo
function belongs to the root node, and may depend on a set of root nodes
rather than just a single one.</p>
</dd></dl>

</div>
<div class="section" id="module-wbia.dtool.depcache_object">
<span id="wbia-dtool-depcache-object-module"></span><h2>wbia.dtool.depcache_object module<a class="headerlink" href="#module-wbia.dtool.depcache_object" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-wbia.dtool.depcache_table">
<span id="wbia-dtool-depcache-table-module"></span><h2>wbia.dtool.depcache_table module<a class="headerlink" href="#module-wbia.dtool.depcache_table" title="Permalink to this headline">¶</a></h2>
<p>Module contining DependencyCacheTable</p>
<p>python -m dtool.depcache_control –exec-make_graph –show
python -m dtool.depcache_control –exec-make_graph –show –reduce</p>
<dl class="docutils">
<dt>FIXME:</dt>
<dd><dl class="first last docutils">
<dt>RECTIFY: ismulti / ismodel need to be rectified. This indicate that this</dt>
<dd>table recieves multiple inputs from at least one parent table.</dd>
<dt>RECTIFY: Need to standardize parent rowids -vs- parent args.</dt>
<dd>in one-to-one cases they are the same. In multi cases the rowids indicate
a uuid and the args are the saved set of rowids that exist in the manifest.</dd>
<dt>RECTIFY: is rowid_list row-major or column-major?</dt>
<dd>I think currently rowid_list is row-major and rowid_listT is column-major
but this may not be consistent.</dd>
</dl>
</dd>
</dl>
<dl class="class">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable">
<em class="property">class </em><code class="descclassname">wbia.dtool.depcache_table.</code><code class="descname">DependencyCacheTable</code><span class="sig-paren">(</span><em>depc=None</em>, <em>parent_tablenames=None</em>, <em>tablename=None</em>, <em>data_colnames=None</em>, <em>data_coltypes=None</em>, <em>preproc_func=None</em>, <em>docstr='no docstr'</em>, <em>fname=None</em>, <em>asobject=False</em>, <em>chunksize=None</em>, <em>isinteractive=False</em>, <em>default_to_unpack=False</em>, <em>default_onthefly=False</em>, <em>rm_extern_on_delete=False</em>, <em>vectorized=True</em>, <em>taggable=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.depcache_table._TableGeneralHelper</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.depcache_table._TableInternalSetup</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.depcache_table._TableDebugHelper</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.depcache_table._TableComputeHelper</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.depcache_table._TableConfigHelper</span></code></p>
<p>An individual node in the dependency graph.</p>
<dl class="docutils">
<dt>All SQL column information is stored in:</dt>
<dd>internal_col_attrs - keeps track of internal info</dd>
<dt>Additional metadata about specific columns is stored in</dt>
<dd>parent_col_attrs - keeps track of parent info
data_col_attrs - keeps track of computed data</dd>
</dl>
<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.db">
<code class="descname">db</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.db" title="Permalink to this definition">¶</a></dt>
<dd><p>pointer to underlying database</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dtool.SQLDatabaseController</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.depc">
<code class="descname">depc</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.depc" title="Permalink to this definition">¶</a></dt>
<dd><p>pointer to parent cache</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dtool.DependencyCache</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.tablename">
<code class="descname">tablename</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.tablename" title="Permalink to this definition">¶</a></dt>
<dd><p>name of the table</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.docstr">
<code class="descname">docstr</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.docstr" title="Permalink to this definition">¶</a></dt>
<dd><p>documentation for table</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.parent_tablenames">
<code class="descname">parent_tablenames</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.parent_tablenames" title="Permalink to this definition">¶</a></dt>
<dd><p>parent tables in depcache</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.data_colnames">
<code class="descname">data_colnames</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.data_colnames" title="Permalink to this definition">¶</a></dt>
<dd><p>columns produced by preproc_func</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">List[str]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.data_coltypes">
<code class="descname">data_coltypes</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.data_coltypes" title="Permalink to this definition">¶</a></dt>
<dd><p>column SQL types produced by preproc_func</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">List[str]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.preproc_func">
<code class="descname">preproc_func</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.preproc_func" title="Permalink to this definition">¶</a></dt>
<dd><p>worker function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">func</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.vectorized">
<code class="descname">vectorized</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.vectorized" title="Permalink to this definition">¶</a></dt>
<dd><p>by defaults it is assumed registered functions can
process multiple inputs at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.taggable">
<code class="descname">taggable</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.taggable" title="Permalink to this definition">¶</a></dt>
<dd><p>specifies if a computed object can be disconected from
its ancestors and accessed via a tag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.depcache_table –exec-DependencyCacheTable</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_table</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;vsmany&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;spam&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;vsone&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;nnindexer&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.clear_table">
<code class="descname">clear_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable.clear_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.clear_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all data in this table</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.delete_rows">
<code class="descname">delete_rows</code><span class="sig-paren">(</span><em>rowid_list</em>, <em>delete_extern=None</em>, <em>dry=False</em>, <em>verbose=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable.delete_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.delete_rows" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.depcache_table –exec-delete_rows</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_table</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#table = depc[&#39;keypoint&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;chip&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">delete_rows</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">tablename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">explicit_graph</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config1</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">configclass</span><span class="p">(</span><span class="n">version</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config3</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">configclass</span><span class="p">(</span><span class="n">version</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;.jpg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config4</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">configclass</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;.jpg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create several configs of rowid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;spam&#39;</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;spam&#39;</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;spam&#39;</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;spam&#39;</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Delete the png configs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowid_list1</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">tablename</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                              <span class="n">config</span><span class="o">=</span><span class="n">config2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowid_list2</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">tablename</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                              <span class="n">config</span><span class="o">=</span><span class="n">config1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowid_list</span> <span class="o">=</span> <span class="n">rowid_list1</span> <span class="o">+</span> <span class="n">rowid_list2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">setintersect_ordered</span><span class="p">(</span><span class="n">rowid_list1</span><span class="p">,</span> <span class="n">rowid_list2</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span><span class="o">.</span><span class="n">delete_rows</span><span class="p">(</span><span class="n">rowid_list</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.ensure_rows">
<code class="descname">ensure_rows</code><span class="sig-paren">(</span><em>parent_ids_</em>, <em>preproc_args</em>, <em>config=None</em>, <em>verbose=True</em>, <em>_debug=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable.ensure_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.ensure_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Lazy addition</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_table</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="n">testdata_depc3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;vsone&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">get_rowid</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">configclass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_debug</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># test duplicate inputs are detected and accounted for</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parent_rowids</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">))]</span> <span class="o">*</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rectify_tup</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">_rectify_ids</span><span class="p">(</span><span class="n">parent_rowids</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">parent_ids_</span><span class="p">,</span> <span class="n">preproc_args</span><span class="p">,</span> <span class="n">idxs1</span><span class="p">,</span> <span class="n">idxs2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rectify_tup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowids</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">ensure_rows</span><span class="p">(</span><span class="n">parent_ids_</span><span class="p">,</span> <span class="n">preproc_args</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">_debug</span><span class="o">=</span><span class="n">_debug</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;rowids = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rowids</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.export_rows">
<code class="descname">export_rows</code><span class="sig-paren">(</span><em>rowid</em>, <em>target</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable.export_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.export_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>The goal of this is to export taggable data that can be used
independantly of its dependant features.</p>
<dl class="docutils">
<dt>TODO List:</dt>
<dd><ul class="first simple">
<li><dl class="first docutils">
<dt>Gather information about columns</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Native and (localized) external data</dt>
<dd><ul class="first last">
<li>&lt;table&gt;_rowid - non-transferable</li>
<li>Parent UUIDS - non-transferable</li>
<li>config rowid - non-transferable</li>
<li>model_uuid -</li>
<li>augment_bit - transferable - trivial</li>
<li>words_extern_uri - copy to destination</li>
<li>feat_setsize - transferable - trivial</li>
<li>model_tag</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Should also gather info from manifest:</dt>
<dd><ul class="first last">
<li>feat_setuuid_primary_ids - non-transferable</li>
<li>feat_setuuid_model_input - non-transferable</li>
</ul>
</dd>
</dl>
</li>
<li>Should gather exhaustive config history</li>
</ul>
</dd>
</dl>
</li>
<li>Save to disk</li>
<li>Add function to reload data in exported format</li>
<li>Getters should be able to specify a tag inplace of the root input</li>
</ul>
<p class="last">for the tagged. Additionally native root-ids should also be
allowed.</p>
</dd>
</dl>
<p>rowid = 1</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.get_internal_columns">
<code class="descname">get_internal_columns</code><span class="sig-paren">(</span><em>tbl_rowids</em>, <em>colnames=None</em>, <em>eager=True</em>, <em>nInput=None</em>, <em>unpack_scalars=True</em>, <em>keepwrap=False</em>, <em>showprog=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable.get_internal_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.get_internal_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Access data in this table using the table PRIMARY KEY rowids (not
depc PRIMARY ids)</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.get_row_data">
<code class="descname">get_row_data</code><span class="sig-paren">(</span><em>tbl_rowids</em>, <em>colnames=None</em>, <em>_debug=None</em>, <em>read_extern=True</em>, <em>num_retries=1</em>, <em>eager=True</em>, <em>nInput=None</em>, <em>ensure=True</em>, <em>delete_on_fail=True</em>, <em>showprog=False</em>, <em>unpack_columns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable.get_row_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.get_row_data" title="Permalink to this definition">¶</a></dt>
<dd><p>FIXME: unpacking is confusing with sql controller
TODO: Clean up and allow for eager=False</p>
<p>colnames = (‘mask’, ‘size’)</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.depcache_table –test-get_row_data:0
python -m dtool.depcache_table –test-get_row_data:1</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_table</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;chip&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">get_row_data</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl_rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;chip&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">_debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">recompute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colnames</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;size_1&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="s1">&#39;chip&#39;</span> <span class="o">+</span> <span class="n">EXTERN_SUFFIX</span><span class="p">,</span> <span class="s1">&#39;chip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">read_extern</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_retries</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">_debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">get_row_data</span><span class="p">(</span><span class="n">tbl_rowids</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list0</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">take_column</span><span class="p">(</span><span class="n">prop_list</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span> <span class="c1"># data subset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">prop_list0</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#_debug, num_retries, read_extern = True, 1, True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_gen</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">get_row_data</span><span class="p">(</span><span class="n">tbl_rowids</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="n">eager</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">prop_gen</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">prop_list2</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">prop_list</span><span class="p">),</span> <span class="s1">&#39;inconsistent lens&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="n">ut</span><span class="o">.</span><span class="n">lists_eq</span><span class="p">(</span><span class="n">prop_list2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">prop_list</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prop_list</span><span class="p">))]),</span> <span class="s1">&#39;inconsistent vals&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chips</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">get_row_data</span><span class="p">(</span><span class="n">tbl_rowids</span><span class="p">,</span> <span class="s1">&#39;chip&#39;</span><span class="p">,</span> <span class="n">eager</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>[</dt>
<dd>[2453, (1707, 2453), ‘chip_chip_id=1_pyrappzicqoskdjq.png’],
[250, (300, 250), ‘chip_chip_id=2_pyrappzicqoskdjq.png’],
[372, (545, 372), ‘chip_chip_id=3_pyrappzicqoskdjq.png’],</dd>
</dl>
<p>]</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Test external / ensure getters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;chip&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">get_row_data</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">clear_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_extern</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tbl_rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;chip&#39;</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_fpaths</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;chip&#39;</span><span class="p">,</span> <span class="n">aids</span><span class="p">,</span> <span class="s1">&#39;chip&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">read_extern</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Ensure data is recomputed if an external file is missing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">remove_fpaths</span><span class="p">(</span><span class="n">data_fpaths</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">get_row_data</span><span class="p">(</span><span class="n">tbl_rowids</span><span class="p">,</span> <span class="s1">&#39;chip&#39;</span><span class="p">,</span> <span class="n">read_extern</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">get_row_data</span><span class="p">(</span><span class="n">tbl_rowids</span><span class="p">,</span> <span class="s1">&#39;chip&#39;</span><span class="p">,</span> <span class="n">read_extern</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.get_rowid">
<code class="descname">get_rowid</code><span class="sig-paren">(</span><em>parent_rowids</em>, <em>config=None</em>, <em>ensure=True</em>, <em>eager=True</em>, <em>nInput=None</em>, <em>recompute=False</em>, <em>_debug=None</em>, <em>num_retries=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable.get_rowid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.get_rowid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the rowids of derived properties.  If they do not exist it
computes them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent_rowids</strong> (<em>list</em>) – list of tuples with the parent rowids as the
value of each tuple</li>
<li><strong>config</strong> (<em>None</em>) – (default = None)</li>
<li><strong>ensure</strong> (<em>bool</em>) – eager evaluation if True (default = True)</li>
<li><strong>eager</strong> (<em>bool</em>) – (default = True)</li>
<li><strong>nInput</strong> (<em>int</em>) – (default = None)</li>
<li><strong>recompute</strong> (<em>bool</em>) – (default = False)</li>
<li><strong>_debug</strong> (<em>None</em>) – (default = None)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">rowid_list</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.depcache_table –exec-get_rowid</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_table</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="n">testdata_depc3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;labeler&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">get_rowid</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">configclass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_debug</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parent_rowids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowids</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">get_rowid</span><span class="p">(</span><span class="n">parent_rowids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">_debug</span><span class="o">=</span><span class="n">_debug</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;rowids = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rowids</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">rowids = [1, None, None, 2]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.initialize">
<code class="descname">initialize</code><span class="sig-paren">(</span><em>_debug=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#DependencyCacheTable.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensures the SQL schema for this cache table</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.number_of_rows">
<code class="descname">number_of_rows</code><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.number_of_rows" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.depcache_table.DependencyCacheTable.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.depcache_table.DependencyCacheTable.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.depcache_table.ExternType">
<em class="property">class </em><code class="descclassname">wbia.dtool.depcache_table.</code><code class="descname">ExternType</code><span class="sig-paren">(</span><em>read_func</em>, <em>write_func</em>, <em>extern_ext=None</em>, <em>extkey=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#ExternType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.ExternType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ubelt.util_mixins.NiceRepr</span></code></p>
<p>Type to denote an external resource not saved in an SQL table</p>
</dd></dl>

<dl class="exception">
<dt id="wbia.dtool.depcache_table.ExternalStorageException">
<em class="property">exception </em><code class="descclassname">wbia.dtool.depcache_table.</code><code class="descname">ExternalStorageException</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#ExternalStorageException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.ExternalStorageException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Indicates a missing external file</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.depcache_table.ensure_config_table">
<code class="descclassname">wbia.dtool.depcache_table.</code><code class="descname">ensure_config_table</code><span class="sig-paren">(</span><em>db</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#ensure_config_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.ensure_config_table" title="Permalink to this definition">¶</a></dt>
<dd><p>SQL definition of configuration table.</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.depcache_table.make_extern_io_funcs">
<code class="descclassname">wbia.dtool.depcache_table.</code><code class="descname">make_extern_io_funcs</code><span class="sig-paren">(</span><em>table</em>, <em>cls</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#make_extern_io_funcs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.make_extern_io_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Hack in read/write defaults for pickleable classes</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.depcache_table.predrop_grace_period">
<code class="descclassname">wbia.dtool.depcache_table.</code><code class="descname">predrop_grace_period</code><span class="sig-paren">(</span><em>tablename</em>, <em>seconds=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/depcache_table.html#predrop_grace_period"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.depcache_table.predrop_grace_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Hack that gives the user some time to abort deleting everything</p>
</dd></dl>

</div>
<div class="section" id="module-wbia.dtool.example_depcache">
<span id="wbia-dtool-example-depcache-module"></span><h2>wbia.dtool.example_depcache module<a class="headerlink" href="#module-wbia.dtool.example_depcache" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.example_depcache –exec-dummy_example_depcacahe –show
python -m dtool.depcache_control –exec-make_graph –show</dd>
</dl>
<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyAnnotMatch">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyAnnotMatch</code><span class="sig-paren">(</span><em>qaid=None</em>, <em>daids=None</em>, <em>qnid=None</em>, <em>dnid_list=None</em>, <em>annot_score_list=None</em>, <em>unique_nids=None</em>, <em>name_score_list=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyAnnotMatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyAnnotMatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.MatchResult" title="wbia.dtool.base.MatchResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.MatchResult</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyChipConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyChipConfig</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyChipConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyChipConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.Config" title="wbia.dtool.base.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.Config</span></code></a></p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">DummyChipConfig</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">dim_size</span> <span class="o">=</span> <span class="mi">700</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">histeq</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">histeq</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyIndexerConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyIndexerConfig</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyIndexerConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyIndexerConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.Config" title="wbia.dtool.base.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.Config</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyKptsConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyKptsConfig</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyKptsConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyKptsConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.Config" title="wbia.dtool.base.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.Config</span></code></a></p>
<dl class="method">
<dt id="wbia.dtool.example_depcache.DummyKptsConfig.get_param_info_list">
<code class="descname">get_param_info_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyKptsConfig.get_param_info_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyKptsConfig.get_param_info_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyNNConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyNNConfig</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyNNConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyNNConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.Config" title="wbia.dtool.base.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.Config</span></code></a></p>
<dl class="method">
<dt id="wbia.dtool.example_depcache.DummyNNConfig.get_param_info_list">
<code class="descname">get_param_info_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyNNConfig.get_param_info_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyNNConfig.get_param_info_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummySVERConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummySVERConfig</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummySVERConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummySVERConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.Config" title="wbia.dtool.base.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.Config</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyVsManyConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyVsManyConfig</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyVsManyConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsManyConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.Config" title="wbia.dtool.base.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.Config</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyVsManyRequest">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyVsManyRequest</code><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyVsManyRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsManyRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.VsManySimilarityRequest" title="wbia.dtool.base.VsManySimilarityRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.VsManySimilarityRequest</span></code></a></p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo_config</span> <span class="o">=</span> <span class="n">DummyVsManyConfig</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">algo_config</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="wbia.dtool.example_depcache.DummyVsManyRequest.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsManyRequest.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyVsOneConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyVsOneConfig</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyVsOneConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsOneConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.Config" title="wbia.dtool.base.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.Config</span></code></a></p>
<dl class="method">
<dt id="wbia.dtool.example_depcache.DummyVsOneConfig.get_param_info_list">
<code class="descname">get_param_info_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyVsOneConfig.get_param_info_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsOneConfig.get_param_info_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.example_depcache.DummyVsOneConfig.get_sub_config_list">
<code class="descname">get_sub_config_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyVsOneConfig.get_sub_config_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsOneConfig.get_sub_config_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyVsOneMatch">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyVsOneMatch</code><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyVsOneMatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsOneMatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.AlgoResult" title="wbia.dtool.base.AlgoResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.AlgoResult</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dev.NiceRepr</span></code></p>
</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.DummyVsOneRequest">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">DummyVsOneRequest</code><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#DummyVsOneRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsOneRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.VsOneSimilarityRequest" title="wbia.dtool.base.VsOneSimilarityRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.VsOneSimilarityRequest</span></code></a></p>
<dl class="method">
<dt id="wbia.dtool.example_depcache.DummyVsOneRequest.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.example_depcache.DummyVsOneRequest.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.example_depcache.ProbchipConfig">
<em class="property">class </em><code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">ProbchipConfig</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#ProbchipConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.ProbchipConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#wbia.dtool.base.Config" title="wbia.dtool.base.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">wbia.dtool.base.Config</span></code></a></p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.example_depcache –exec-ProbchipConfig –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.depcache_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;probchip&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exec</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">execstr_funckw</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">get_rowid</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">configclass</span><span class="p">(</span><span class="n">testerror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root_rowids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parent_rowids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">root_rowids</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">proptup_gen</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">preproc_func</span><span class="p">(</span><span class="n">depc</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pc_rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;probchip&#39;</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list2</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;probchip&#39;</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">read_extern</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prop_list2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#depc.new_request(&#39;probchip&#39;, [1, 2, 3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fg_rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;fgweight&#39;</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fg</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fgweight&#39;</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#############</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">configclass</span><span class="p">(</span><span class="n">testerror</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root_rowids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parent_rowids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">root_rowids</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">proptup_gen</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">preproc_func</span><span class="p">(</span><span class="n">depc</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pc_rowids2</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;probchip&#39;</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prop_list2</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;probchip&#39;</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">read_extern</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prop_list2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#depc.new_request(&#39;probchip&#39;, [1, 2, 3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fg_rowids2</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;fgweight&#39;</span><span class="p">,</span> <span class="n">root_rowids</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.example_depcache.dummy_example_depcacahe">
<code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">dummy_example_depcacahe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#dummy_example_depcacahe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.dummy_example_depcacahe" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.example_depcache –exec-dummy_example_depcacahe</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">dummy_example_depcacahe</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.example_depcache.example_getter_methods">
<code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">example_getter_methods</code><span class="sig-paren">(</span><em>depc</em>, <em>tablename</em>, <em>root_rowids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#example_getter_methods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.example_getter_methods" title="Permalink to this definition">¶</a></dt>
<dd><p>example of different ways to get data</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.example_depcache.test_getters">
<code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">test_getters</code><span class="sig-paren">(</span><em>depc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#test_getters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.test_getters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="wbia.dtool.example_depcache.testdata_depc">
<code class="descclassname">wbia.dtool.example_depcache.</code><code class="descname">testdata_depc</code><span class="sig-paren">(</span><em>fname=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache.html#testdata_depc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache.testdata_depc" title="Permalink to this definition">¶</a></dt>
<dd><p>Example of local registration</p>
</dd></dl>

</div>
<div class="section" id="module-wbia.dtool.example_depcache2">
<span id="wbia-dtool-example-depcache2-module"></span><h2>wbia.dtool.example_depcache2 module<a class="headerlink" href="#module-wbia.dtool.example_depcache2" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="wbia.dtool.example_depcache2.depc_34_helper">
<code class="descclassname">wbia.dtool.example_depcache2.</code><code class="descname">depc_34_helper</code><span class="sig-paren">(</span><em>depc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache2.html#depc_34_helper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache2.depc_34_helper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="wbia.dtool.example_depcache2.testdata_custom_annot_depc">
<code class="descclassname">wbia.dtool.example_depcache2.</code><code class="descname">testdata_custom_annot_depc</code><span class="sig-paren">(</span><em>dummy_dependencies</em>, <em>in_memory=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache2.html#testdata_custom_annot_depc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache2.testdata_custom_annot_depc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="wbia.dtool.example_depcache2.testdata_depc3">
<code class="descclassname">wbia.dtool.example_depcache2.</code><code class="descname">testdata_depc3</code><span class="sig-paren">(</span><em>in_memory=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache2.html#testdata_depc3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache2.testdata_depc3" title="Permalink to this definition">¶</a></dt>
<dd><p>Example of local registration</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.example_depcache2 testdata_depc3 –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;labeler&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">_debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;indexer&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">_debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">print_all_tables</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(--show)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">quit_if_noshow</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia.plottool</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">show_graph</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.plottool.interactions</span> <span class="k">import</span> <span class="n">ExpandableInteraction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inter</span> <span class="o">=</span> <span class="n">ExpandableInteraction</span><span class="p">(</span><span class="n">nCols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;smk_match&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">show_input_graph</span><span class="p">(</span><span class="n">inter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;vsone&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">show_input_graph</span><span class="p">(</span><span class="n">inter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#depc[&#39;vocab&#39;].show_input_graph(inter)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;neighbs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">show_input_graph</span><span class="p">(</span><span class="n">inter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inter</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#depc[&#39;viewpoint_classification&#39;].show_input_graph()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">show_if_requested</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.example_depcache2.testdata_depc4">
<code class="descclassname">wbia.dtool.example_depcache2.</code><code class="descname">testdata_depc4</code><span class="sig-paren">(</span><em>in_memory=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/example_depcache2.html#testdata_depc4"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.example_depcache2.testdata_depc4" title="Permalink to this definition">¶</a></dt>
<dd><p>Example of local registration</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.example_depcache2 testdata_depc4 –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc4</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#data = depc.get(&#39;labeler&#39;, [1, 2, 3], &#39;data&#39;, _debug=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#data = depc.get(&#39;indexer&#39;, [[1, 2, 3]], &#39;data&#39;, _debug=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">print_all_tables</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(--show)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">quit_if_noshow</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia.plottool</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">show_graph</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.plottool.interactions</span> <span class="k">import</span> <span class="n">ExpandableInteraction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inter</span> <span class="o">=</span> <span class="n">ExpandableInteraction</span><span class="p">(</span><span class="n">nCols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;smk_match&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">show_input_graph</span><span class="p">(</span><span class="n">inter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;vsone&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">show_input_graph</span><span class="p">(</span><span class="n">inter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;vocab&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">show_input_graph</span><span class="p">(</span><span class="n">inter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="p">[</span><span class="s1">&#39;neighbs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">show_input_graph</span><span class="p">(</span><span class="n">inter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inter</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#depc[&#39;viewpoint_classification&#39;].show_input_graph()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">show_if_requested</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-wbia.dtool.experimental_features">
<span id="wbia-dtool-experimental-features-module"></span><h2>wbia.dtool.experimental_features module<a class="headerlink" href="#module-wbia.dtool.experimental_features" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-wbia.dtool.input_helpers">
<span id="wbia-dtool-input-helpers-module"></span><h2>wbia.dtool.input_helpers module<a class="headerlink" href="#module-wbia.dtool.input_helpers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wbia.dtool.input_helpers.BranchId">
<em class="property">class </em><code class="descclassname">wbia.dtool.input_helpers.</code><code class="descname">BranchId</code><span class="sig-paren">(</span><em>accum_ids</em>, <em>k</em>, <em>parent_colx</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#BranchId"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.BranchId" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_class.HashComparable</span></code></p>
</dd></dl>

<dl class="class">
<dt id="wbia.dtool.input_helpers.ExiNode">
<em class="property">class </em><code class="descclassname">wbia.dtool.input_helpers.</code><code class="descname">ExiNode</code><span class="sig-paren">(</span><em>node_id</em>, <em>branch_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#ExiNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.ExiNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_class.HashComparable</span></code></p>
<p>Expanded Input Node</p>
<p>helps distinguish nodes and branch_ids</p>
<dl class="attribute">
<dt id="wbia.dtool.input_helpers.ExiNode.branch_id">
<code class="descname">branch_id</code><a class="headerlink" href="#wbia.dtool.input_helpers.ExiNode.branch_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.input_helpers.ExiNode.node_id">
<code class="descname">node_id</code><a class="headerlink" href="#wbia.dtool.input_helpers.ExiNode.node_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.input_helpers.RootMostInput">
<em class="property">class </em><code class="descclassname">wbia.dtool.input_helpers.</code><code class="descname">RootMostInput</code><span class="sig-paren">(</span><em>node</em>, <em>sink</em>, <em>exi_graph</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#RootMostInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.RootMostInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_class.HashComparable</span></code></p>
<dl class="method">
<dt id="wbia.dtool.input_helpers.RootMostInput.compute_order">
<code class="descname">compute_order</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#RootMostInput.compute_order"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.RootMostInput.compute_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns order of computation from this input node to the sink</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.input_helpers.RootMostInput.ismulti">
<code class="descname">ismulti</code><a class="headerlink" href="#wbia.dtool.input_helpers.RootMostInput.ismulti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.RootMostInput.parent_level">
<code class="descname">parent_level</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#RootMostInput.parent_level"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.RootMostInput.parent_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns rootmost inputs above this node</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc4</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;smk_match&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rootmost_inputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rmi</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">rmi_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">rmi</span><span class="o">.</span><span class="n">parent_level</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.input_helpers.TableInput">
<em class="property">class </em><code class="descclassname">wbia.dtool.input_helpers.</code><code class="descname">TableInput</code><span class="sig-paren">(</span><em>rmi_list</em>, <em>exi_graph</em>, <em>table</em>, <em>reorder=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dev.NiceRepr</span></code></p>
<p>Specifies a set of inputs that can validly compute the output of a table in
the dependency graph</p>
<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.exi_nodes">
<code class="descname">exi_nodes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput.exi_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.exi_nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.expand_input">
<code class="descname">expand_input</code><span class="sig-paren">(</span><em>index</em>, <em>inplace=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput.expand_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.expand_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Pushes the rootmost inputs all the way up to the sources of the graph</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.input_helpers expand_input</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.input_helpers</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc4</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;smk_match&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rootmost_inputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;neighbs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rootmost_inputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(pre-expand)  inputs  = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inputs</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="s1">&#39;indexer&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs2</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">expand_input</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(post-expand) inputs2 = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inputs2</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="s1">&#39;indexer&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">inputs</span><span class="p">),</span> <span class="s1">&#39;missing indexer1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="s1">&#39;indexer&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">inputs2</span><span class="p">),</span> <span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;(2) unexpected indexer in </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inputs2</span><span class="p">,))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.expected_input_depth">
<code class="descname">expected_input_depth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput.expected_input_depth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.expected_input_depth" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.input_helpers</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc4</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;neighbs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rootmost_inputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="s1">&#39;indexer&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">expand_input</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">size</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">expected_input_depth</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;size = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;feat&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rootmost_inputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">size</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">expected_input_depth</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;size = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span><span class="p">,))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.flat_compute_order">
<code class="descname">flat_compute_order</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput.flat_compute_order"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.flat_compute_order" title="Permalink to this definition">¶</a></dt>
<dd><p>This is basically the scheduler</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.input_helpers flat_compute_order</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(--fixme)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.input_helpers</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc4</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;feat&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rootmost_inputs</span><span class="o">.</span><span class="n">total_expand</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flat_compute_order</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">flat_compute_order</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">flat_compute_order</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">[chip[t, t:1, 1:1], probchip[t, t:1, 1:1], feat[t, t:1]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.flat_compute_rmi_edges">
<code class="descname">flat_compute_rmi_edges</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput.flat_compute_rmi_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.flat_compute_rmi_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines order of computation that maps input_ids to target_ids.</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.input_helpers flat_compute_rmi_edges</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>compute_edges</dt>
<dd><dl class="first docutils">
<dt>Each item is a tuple of input/output RootMostInputs</dt>
<dd>([parent_1, …, parent_n], node_i)</dd>
</dl>
<p class="last">All parents should be known before you reach the i-th item in
the list.
Results of the the i-th item may be used in subsequent item
computations.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.input_helpers</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span><span class="n">testdata_custom_annot_depc</span><span class="p">([</span>
<span class="gp">... </span>   <span class="nb">dict</span><span class="p">(</span><span class="n">tablename</span><span class="o">=</span><span class="s1">&#39;chips&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;annot&#39;</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="nb">dict</span><span class="p">(</span><span class="n">tablename</span><span class="o">=</span><span class="s1">&#39;Notch_Tips&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;annot&#39;</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="nb">dict</span><span class="p">(</span><span class="n">tablename</span><span class="o">=</span><span class="s1">&#39;Cropped_Chips&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;chips&#39;</span><span class="p">,</span> <span class="s1">&#39;Notch_Tips&#39;</span><span class="p">]),</span>
<span class="gp">... </span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;Cropped_Chips&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">exi_inputs</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">rootmost_inputs</span><span class="o">.</span><span class="n">total_expand</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_rmi_edges</span> <span class="o">=</span> <span class="n">exi_inputs</span><span class="o">.</span><span class="n">flat_compute_rmi_edges</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_rmis</span> <span class="o">=</span> <span class="n">compute_rmi_edges</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">input_rmis</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">[chips[t, t:1, 1:1], Notch_Tips[t, t:1, 1:1]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.is_single_inputs">
<code class="descname">is_single_inputs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput.is_single_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.is_single_inputs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.show_exi_graph">
<code class="descname">show_exi_graph</code><span class="sig-paren">(</span><em>inter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput.show_exi_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.show_exi_graph" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.input_helpers TableInput.show_exi_graph –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.input_helpers</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># table = depc[&#39;smk_match&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;neighbs&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">rootmost_inputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;inputs = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inputs</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia.plottool</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.plottool.interactions</span> <span class="k">import</span> <span class="n">ExpandableInteraction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inter</span> <span class="o">=</span> <span class="n">ExpandableInteraction</span><span class="p">(</span><span class="n">nCols</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span><span class="o">.</span><span class="n">show_exi_graph</span><span class="p">(</span><span class="n">inter</span><span class="o">=</span><span class="n">inter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># FIXME; Expanding inputs can overspecify inputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#inputs = inputs.expand_input(2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#print(&#39;inputs = %r&#39; % (inputs,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#inputs.show_exi_graph(inter=inter)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#inputs = inputs.expand_input(1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#inputs = inputs.expand_input(3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#inputs = inputs.expand_input(2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#inputs = inputs.expand_input(2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#inputs = inputs.expand_input(1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#print(&#39;inputs = %r&#39; % (inputs,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#inputs.show_exi_graph(inter=inter)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inter</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">show_if_requested</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.input_helpers.TableInput.total_expand">
<code class="descname">total_expand</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#TableInput.total_expand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.TableInput.total_expand" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="wbia.dtool.input_helpers.get_rootmost_inputs">
<code class="descclassname">wbia.dtool.input_helpers.</code><code class="descname">get_rootmost_inputs</code><span class="sig-paren">(</span><em>exi_graph</em>, <em>table</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#get_rootmost_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.get_rootmost_inputs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.input_helpers get_rootmost_inputs –show</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>exi_graph</strong> (<em>nx.Graph</em>) – made from make_expanded_input_graph(graph, target)</li>
<li><strong>table</strong> (<em>dtool.Table</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.input_helpers get_rootmost_inputs</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.input_helpers</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;smk_match&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exi_graph</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">expanded_input_graph</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs_</span> <span class="o">=</span> <span class="n">get_rootmost_inputs</span><span class="p">(</span><span class="n">exi_graph</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;inputs_ = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inputs_</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">inputs_</span><span class="o">.</span><span class="n">expand_input</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rmi</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">rmi_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;inputs = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inputs</span><span class="p">,))</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="s1">&#39;compute_edges = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">flat_compute_rmi_edges</span><span class="p">(),</span> <span class="n">nl</span><span class="o">=</span><span class="mi">1</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.input_helpers.make_expanded_input_graph">
<code class="descclassname">wbia.dtool.input_helpers.</code><code class="descname">make_expanded_input_graph</code><span class="sig-paren">(</span><em>graph</em>, <em>target</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#make_expanded_input_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.make_expanded_input_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Starting from the <cite>target</cite> property we trace all possible paths in the
<cite>graph</cite> back to all sources.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>graph</strong> (<em>nx.DiMultiGraph</em>) – the dependency graph with a single source.</li>
<li><strong>target</strong> (<em>str</em>) – a single target node in graph</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Each edge in the graph must have a <cite>local_input_id</cite> that defines the
type of edge it is: (eg one-to-many, one-to-one, nwise/multi).</p>
<p># Step 1: Extracting the Relevant Subgraph
We start by searching for all sources of the graph (we assume there is
only one). Then we extract the subgraph defined by all edges between
the sources and the target.  We augment this graph with a dummy super
source <cite>s</cite> and super sink <cite>t</cite>. This allows us to associate an edge with
the real source and sink.</p>
<p># Step 2: Trace all paths from <cite>s</cite> to <cite>t</cite>.
Create a set of all paths from the source to the sink and accumulate
the <cite>local_input_id</cite> of each edge along the path. This will uniquely
identify each path. We use a hack to condense the accumualated ids in
order to display them nicely.</p>
<p># Step 3: Create the new <cite>exi_graph</cite>
Using the traced paths with ids we construct a new graph representing
expanded inputs. The nodes in the original graph will be copied for each
unique path that passes through the node. We identify these nodes using
the accumulated ids built along the edges in our path set.  For each
path starting from the target we add each node augmented with the
accumulated ids on its output(?) edge. We also add the edges along
these paths which results in the final <cite>exi_graph</cite>.</p>
<p># Step 4: Identify valid inputs candidates
The purpose of this graph is to identify which inputs are needed
to compute dependant properties. One valid set of inputs is all
sources of the graph. However, sometimes it is preferable to specify
a model that may have been trained from many inputs. Therefore any
node with a one-to-many input edge may also be specified as an input.</p>
<p># Step 5: Identify root-most inputs
The user will only specify one possible set of the inputs. We refer  to
this set as the “root-most” inputs. This is a set of candiate nodes
such that all paths from the sink to the super source are blocked.  We
default to the set of inputs which results in the fewest dependency
computations. However this is arbitary.</p>
<p>The last step that is not represented here is to compute the order that
the branches must be specified in when given to the depcache for a
computation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">exi_graph: the expanded input graph</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">nx.DiGraph</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>All * nodes are defined to be distinct.
TODO: To make a * node non-distinct it must be suffixed with an
identifier.</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.input_helpers make_expanded_input_graph –show</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.input_helpers</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span> <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc3</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;smk_match&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;vsone&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">depc</span><span class="o">.</span><span class="n">explicit_graph</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">tablename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exi_graph</span> <span class="o">=</span> <span class="n">make_expanded_input_graph</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exi_graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(--show)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">quit_if_noshow</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia.plottool</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pt</span><span class="o">.</span><span class="n">show_nx</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">fnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pnum</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pt</span><span class="o">.</span><span class="n">show_nx</span><span class="p">(</span><span class="n">exi_graph</span><span class="p">,</span> <span class="n">fnum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pnum</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">show_if_requested</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.input_helpers.recolor_exi_graph">
<code class="descclassname">wbia.dtool.input_helpers.</code><code class="descname">recolor_exi_graph</code><span class="sig-paren">(</span><em>exi_graph</em>, <em>rootmost_nodes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#recolor_exi_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.recolor_exi_graph" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="wbia.dtool.input_helpers.sort_rmi_list">
<code class="descclassname">wbia.dtool.input_helpers.</code><code class="descname">sort_rmi_list</code><span class="sig-paren">(</span><em>rmi_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/input_helpers.html#sort_rmi_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.input_helpers.sort_rmi_list" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.input_helpers sort_rmi_list</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.input_helpers</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache2</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span><span class="n">testdata_custom_annot_depc</span><span class="p">([</span>
<span class="gp">... </span>   <span class="nb">dict</span><span class="p">(</span><span class="n">tablename</span><span class="o">=</span><span class="s1">&#39;Notch_Tips&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;annot&#39;</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="nb">dict</span><span class="p">(</span><span class="n">tablename</span><span class="o">=</span><span class="s1">&#39;chips&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;annot&#39;</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="nb">dict</span><span class="p">(</span><span class="n">tablename</span><span class="o">=</span><span class="s1">&#39;Cropped_Chips&#39;</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;chips&#39;</span><span class="p">,</span> <span class="s1">&#39;Notch_Tips&#39;</span><span class="p">]),</span>
<span class="gp">... </span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;Cropped_Chips&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">exi_inputs</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">rootmost_inputs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_rmi_edges</span> <span class="o">=</span> <span class="n">exi_inputs</span><span class="o">.</span><span class="n">flat_compute_rmi_edges</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_rmis</span> <span class="o">=</span> <span class="n">compute_rmi_edges</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rmi_list</span> <span class="o">=</span> <span class="n">input_rmis</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rmi_list</span> <span class="o">=</span> <span class="n">sort_rmi_list</span><span class="p">(</span><span class="n">rmi_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rmi_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;chips&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-wbia.dtool.old_stuff">
<span id="wbia-dtool-old-stuff-module"></span><h2>wbia.dtool.old_stuff module<a class="headerlink" href="#module-wbia.dtool.old_stuff" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-wbia.dtool.sql_control">
<span id="wbia-dtool-sql-control-module"></span><h2>wbia.dtool.sql_control module<a class="headerlink" href="#module-wbia.dtool.sql_control" title="Permalink to this headline">¶</a></h2>
<p>Interface into SQL for the IBEIS Controller</p>
<p>TODO; need to use some sort of sticky bit so
sql files are created with reasonable permissions.</p>
<dl class="class">
<dt id="wbia.dtool.sql_control.SQLColumnRichInfo">
<em class="property">class </em><code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">SQLColumnRichInfo</code><span class="sig-paren">(</span><em>column_id</em>, <em>name</em>, <em>type_</em>, <em>notnull</em>, <em>dflt_value</em>, <em>pk</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.sql_control.SQLColumnRichInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="attribute">
<dt id="wbia.dtool.sql_control.SQLColumnRichInfo.column_id">
<code class="descname">column_id</code><a class="headerlink" href="#wbia.dtool.sql_control.SQLColumnRichInfo.column_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.sql_control.SQLColumnRichInfo.dflt_value">
<code class="descname">dflt_value</code><a class="headerlink" href="#wbia.dtool.sql_control.SQLColumnRichInfo.dflt_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.sql_control.SQLColumnRichInfo.name">
<code class="descname">name</code><a class="headerlink" href="#wbia.dtool.sql_control.SQLColumnRichInfo.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.sql_control.SQLColumnRichInfo.notnull">
<code class="descname">notnull</code><a class="headerlink" href="#wbia.dtool.sql_control.SQLColumnRichInfo.notnull" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.sql_control.SQLColumnRichInfo.pk">
<code class="descname">pk</code><a class="headerlink" href="#wbia.dtool.sql_control.SQLColumnRichInfo.pk" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.sql_control.SQLColumnRichInfo.type_">
<code class="descname">type_</code><a class="headerlink" href="#wbia.dtool.sql_control.SQLColumnRichInfo.type_" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.sql_control.SQLDatabaseController">
<em class="property">class </em><code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">SQLDatabaseController</code><span class="sig-paren">(</span><em>sqldb_dpath='.'</em>, <em>sqldb_fname='database.sqlite3'</em>, <em>text_factory=&lt;class 'str'&gt;</em>, <em>inmemory=None</em>, <em>fpath=None</em>, <em>readonly=None</em>, <em>always_check_metadata=True</em>, <em>timeout=600</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Interface to an SQL database</p>
<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.add_cleanly">
<code class="descname">add_cleanly</code><span class="sig-paren">(</span><em>tblname</em>, <em>colnames</em>, <em>params_iter</em>, <em>get_rowid_from_superkey</em>, <em>superkey_paramx=(0</em>, <em>)</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.add_cleanly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.add_cleanly" title="Permalink to this definition">¶</a></dt>
<dd><p>ADDER Extra input:
the first item of params_iter must be a superkey (like a uuid),</p>
<p>Does not add None values. Does not add duplicate values.
For each None input returns None ouptut.
For each duplicate input returns existing rowid</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tblname</strong> (<em>str</em>) – table name to add into</li>
<li><strong>colnames</strong> (<em>tuple of strs</em>) – columns whos values are specified in params_iter</li>
<li><strong>params_iter</strong> (<em>iterable</em>) – an iterable of tuples where each tuple corresonds to a row</li>
<li><strong>get_rowid_from_superkey</strong> (<em>func</em>) – function that tests if a row needs
to be added. It should return None for any new rows to be inserted.
It should return the existing rowid if one exists</li>
<li><strong>superkey_paramx</strong> (<em>tuple of ints</em>) – indices of tuples in params_iter which
correspond to superkeys. defaults to (0,)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a href="#id3"><span class="problematic" id="id4">rowid_list_</span></a> – list of newly added or previously added rowids</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">iterable</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">SQLDatabaseController</span><span class="p">(</span><span class="n">sqldb_fname</span><span class="o">=</span><span class="s1">&#39;:memory:&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s1">&#39;dummy_table&#39;</span><span class="p">,</span> <span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;rowid&#39;</span><span class="p">,</span>               <span class="s1">&#39;INTEGER PRIMARY KEY&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span>                 <span class="s1">&#39;TEXT&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;superkey1&#39;</span><span class="p">,</span>           <span class="s1">&#39;TEXT&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;superkey2&#39;</span><span class="p">,</span>           <span class="s1">&#39;TEXT&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;val&#39;</span><span class="p">,</span>                 <span class="s1">&#39;TEXT&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">superkeys</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;key&#39;</span><span class="p">,),</span> <span class="p">(</span><span class="s1">&#39;superkey1&#39;</span><span class="p">,</span> <span class="s1">&#39;superkey2&#39;</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">docstr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">print_schema</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tblname</span> <span class="o">=</span> <span class="s1">&#39;dummy_table&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colnames</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params_iter</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;spam&#39;</span><span class="p">,</span> <span class="s1">&#39;eggs&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find a useable superkey</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">superkey_colnames</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_superkey_colnames</span><span class="p">(</span><span class="n">tblname</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">superkey_paramx</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">superkey</span> <span class="ow">in</span> <span class="n">superkey_colnames</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">k</span> <span class="ow">in</span> <span class="n">colnames</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">superkey</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="n">superkey_paramx</span> <span class="o">=</span> <span class="p">[</span><span class="n">colnames</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">superkey</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="n">superkey_colnames</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">colnames</span><span class="p">,</span> <span class="n">superkey_paramx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="k">break</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">get_rowid_from_superkey</span><span class="p">(</span><span class="n">superkeys_list</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">get_where_eq</span><span class="p">(</span><span class="n">tblname</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;rowid&#39;</span><span class="p">,),</span> <span class="nb">zip</span><span class="p">(</span><span class="n">superkeys_list</span><span class="p">),</span> <span class="n">superkey_colnames</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowid_list_</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">add_cleanly</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tblname</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="n">params_iter</span><span class="p">,</span> <span class="n">get_rowid_from_superkey</span><span class="p">,</span> <span class="n">superkey_paramx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">rowid_list_</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.add_column">
<code class="descname">add_column</code><span class="sig-paren">(</span><em>tablename</em>, <em>colname</em>, <em>coltype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.add_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.add_column" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.add_table">
<code class="descname">add_table</code><span class="sig-paren">(</span><em>tablename=None</em>, <em>coldef_list=None</em>, <em>**metadata_keyval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.add_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.add_table" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tablename</strong> (<em>str</em>) – </li>
<li><strong>coldef_list</strong> (<em>list</em>) – </li>
<li><strong>constraint</strong> (<em>list</em><em> or </em><em>None</em>) – </li>
<li><strong>docstr</strong> (<em>str</em>) – </li>
<li><strong>superkeys</strong> (<em>list</em><em> or </em><em>None</em>) – list of tuples of column names which
uniquely identifies a rowid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.backup">
<code class="descname">backup</code><span class="sig-paren">(</span><em>backup_filepath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.backup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.backup" title="Permalink to this definition">¶</a></dt>
<dd><p>backup_filepath = dst_fpath</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.check_rowid_exists">
<code class="descname">check_rowid_exists</code><span class="sig-paren">(</span><em>tablename</em>, <em>rowid_iter</em>, <em>eager=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.check_rowid_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.check_rowid_exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>tblname</em>, <em>id_list</em>, <em>id_colname='rowid'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>deleter. USE delete_rowids instead</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.delete_rowids">
<code class="descname">delete_rowids</code><span class="sig-paren">(</span><em>tblname</em>, <em>rowid_list</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.delete_rowids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.delete_rowids" title="Permalink to this definition">¶</a></dt>
<dd><p>deletes the the rows in rowid_list</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.drop_all_tables">
<code class="descname">drop_all_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.drop_all_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.drop_all_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>DELETES ALL INFO IN TABLE</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.drop_table">
<code class="descname">drop_table</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.drop_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.drop_table" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.dump">
<code class="descname">dump</code><span class="sig-paren">(</span><em>file_=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.dump"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.dump" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.dump_schema">
<code class="descname">dump_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.dump_schema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.dump_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience: Dumps all csv database files to disk NOTE: This function
is semi-obsolete because of the auto-generated current schema file.
Use dump_schema_current_autogeneration instead for all purposes except
for parsing out the database schema or for consice visual
representation.</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.dump_tables_to_csv">
<code class="descname">dump_tables_to_csv</code><span class="sig-paren">(</span><em>dump_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.dump_tables_to_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.dump_tables_to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience: Dumps all csv database files to disk</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.dump_to_file">
<code class="descname">dump_to_file</code><span class="sig-paren">(</span><em>file_</em>, <em>auto_commit=True</em>, <em>schema_only=False</em>, <em>include_metadata=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.dump_to_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.dump_to_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.dump_to_fpath">
<code class="descname">dump_to_fpath</code><span class="sig-paren">(</span><em>dump_fpath</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.dump_to_fpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.dump_to_fpath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.dump_to_stdout">
<code class="descname">dump_to_stdout</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.dump_to_stdout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.dump_to_stdout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.dump_to_string">
<code class="descname">dump_to_string</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.dump_to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.dump_to_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.executemany">
<code class="descname">executemany</code><span class="sig-paren">(</span><em>operation</em>, <em>params_iter</em>, <em>verbose=False</em>, <em>unpack_scalars=True</em>, <em>nInput=None</em>, <em>eager=True</em>, <em>keepwrap=False</em>, <em>showprog=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.executemany"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.executemany" title="Permalink to this definition">¶</a></dt>
<dd><p>if unpack_scalars is True only a single result must be returned for each query.</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.executeone">
<code class="descname">executeone</code><span class="sig-paren">(</span><em>operation</em>, <em>params=()</em>, <em>eager=True</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.executeone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.executeone" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.exists_where_eq">
<code class="descname">exists_where_eq</code><span class="sig-paren">(</span><em>tblname</em>, <em>params_iter</em>, <em>where_colnames</em>, <em>op='AND'</em>, <em>unpack_scalars=True</em>, <em>eager=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.exists_where_eq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.exists_where_eq" title="Permalink to this definition">¶</a></dt>
<dd><p>hacked in function for nicer templates</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>tblname</em>, <em>colnames</em>, <em>id_iter=None</em>, <em>id_colname='rowid'</em>, <em>eager=True</em>, <em>assume_unique=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get" title="Permalink to this definition">¶</a></dt>
<dd><p>getter</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tblname</strong> (<em>str</em>) – table name to get from</li>
<li><strong>colnames</strong> (<em>tuple of str</em>) – column names to grab from</li>
<li><strong>id_iter</strong> (<em>iterable</em>) – iterable of search keys</li>
<li><strong>id_colname</strong> (<em>bool</em>) – column to be used as the search key (default: rowid)</li>
<li><strong>eager</strong> (<em>bool</em>) – use eager evaluation</li>
<li><strong>unpack_scalars</strong> (<em>bool</em>) – default True</li>
<li><strong>id_colname</strong> – default False. Experimental feature that could result in a 10x speedup</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control get</dd>
<dt>Ignore:</dt>
<dd><p class="first">tblname = ‘annotations’
colnames = (‘name_rowid’,)
id_iter = aid_list
#id_iter = id_iter[0:20]
id_colname = ‘rowid’
eager = True
db = ibs.db</p>
<p class="last">x1 = db.get(tblname, colnames, id_iter, assume_unique=True)
x2 = db.get(tblname, colnames, id_iter, assume_unique=False)
x1 == x2
%timeit  db.get(tblname, colnames, id_iter, assume_unique=True)
%timeit  db.get(tblname, colnames, id_iter, assume_unique=False)</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">clear_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;notch&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;notch&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span><span class="o">.</span><span class="n">print_csv</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Break things to test set</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colnames</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;dummy_annot_rowid&#39;</span><span class="p">,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">got_data</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;notch&#39;</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="n">id_iter</span><span class="o">=</span><span class="n">rowids</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">got_data</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_all_col_rows">
<code class="descname">get_all_col_rows</code><span class="sig-paren">(</span><em>tblname</em>, <em>colname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_all_col_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_all_col_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of all rowids from a table in ascending order</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_all_rowids">
<code class="descname">get_all_rowids</code><span class="sig-paren">(</span><em>tblname</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_all_rowids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_all_rowids" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of all rowids from a table in ascending order</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_all_rowids_where">
<code class="descname">get_all_rowids_where</code><span class="sig-paren">(</span><em>tblname</em>, <em>where_clause</em>, <em>params</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_all_rowids_where"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_all_rowids_where" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of rowids from a table in ascending order satisfying a
condition</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_coldef_list">
<code class="descname">get_coldef_list</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_coldef_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_coldef_list" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">each tuple is (col_name, col_type)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list of (str, str)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_column">
<code class="descname">get_column</code><span class="sig-paren">(</span><em>tablename</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Conveinience:</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_column_names">
<code class="descname">get_column_names</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_column_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_column_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Conveinience: Returns the sql tablename columns</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_columns">
<code class="descname">get_columns</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_columns" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tablename</strong> (<em>str</em>) – table name</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>list of tuples with format:</dt>
<dd><dl class="first docutils">
<dt>(</dt>
<dd>column_id  : id of the column
name       : the name of the column
<a href="#id5"><span class="problematic" id="id6">type_</span></a>      : the type of the column
notnull    : 0 or 1 if the column can contains null values
dflt_value : the default value
pk         : 0 or 1 if the column partecipate to the primary key</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">column_list</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p><a class="reference external" href="http://stackoverflow.com/questions/17717829/how-to-get-column-names-from-a-table-in-sqlite-via-pragma-net-c">http://stackoverflow.com/questions/17717829/how-to-get-column-names-from-a-table-in-sqlite-via-pragma-net-c</a>
<a class="reference external" href="http://stackoverflow.com/questions/1601151/how-do-i-check-in-sqlite-whether-a-table-exists">http://stackoverflow.com/questions/1601151/how-do-i-check-in-sqlite-whether-a-table-exists</a></p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –exec-get_columns
python -m dtool.sql_control –exec-get_columns –tablename=contributors
python -m dtool.sql_control –exec-get_columns –tablename=nonexist</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;keypoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colrichinfo_list</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_columns</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;colrichinfo_list = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">colrichinfo_list</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="mi">1</span><span class="p">),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">colrichinfo_list = [</span>
<span class="go">    (0, &#39;keypoint_rowid&#39;, &#39;INTEGER&#39;, 0, None, 1),</span>
<span class="go">    (1, &#39;chip_rowid&#39;, &#39;INTEGER&#39;, 1, None, 0),</span>
<span class="go">    (2, &#39;config_rowid&#39;, &#39;INTEGER&#39;, 0, &#39;0&#39;, 0),</span>
<span class="go">    (3, &#39;kpts&#39;, &#39;NDARRAY&#39;, 0, None, 0),</span>
<span class="go">    (4, &#39;num&#39;, &#39;INTEGER&#39;, 0, None, 0),</span>
<span class="go">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_db_init_uuid">
<code class="descname">get_db_init_uuid</code><span class="sig-paren">(</span><em>ensure=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_db_init_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_db_init_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the database initialization (creation) UUID</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control get_db_init_uuid</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">uuid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Check random database gets new UUID on init</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">SQLDatabaseController</span><span class="p">(</span><span class="n">sqldb_fname</span><span class="o">=</span><span class="s1">&#39;:memory:&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uuid_</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_db_init_uuid</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;New Database: </span><span class="si">%r</span><span class="s1"> is valid&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uuid_</span><span class="p">,</span> <span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">uuid_</span><span class="p">,</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Check existing database keeps UUID</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sqldb_dpath</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">ensure_app_resource_dir</span><span class="p">(</span><span class="s1">&#39;dtool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sqldb_fname</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;test_database.sqlite3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">readonly</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db1</span> <span class="o">=</span> <span class="n">SQLDatabaseController</span><span class="p">(</span><span class="n">sqldb_dpath</span><span class="p">,</span> <span class="n">sqldb_fname</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uuid_1</span> <span class="o">=</span> <span class="n">db1</span><span class="o">.</span><span class="n">get_db_init_uuid</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db2</span> <span class="o">=</span> <span class="n">SQLDatabaseController</span><span class="p">(</span><span class="n">sqldb_dpath</span><span class="p">,</span> <span class="n">sqldb_fname</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uuid_2</span> <span class="o">=</span> <span class="n">db2</span><span class="o">.</span><span class="n">get_db_init_uuid</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Existing Database: </span><span class="si">%r</span><span class="s1"> == </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uuid_1</span><span class="p">,</span> <span class="n">uuid_2</span><span class="p">,</span> <span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uuid_1</span> <span class="o">==</span> <span class="n">uuid_2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_db_version">
<code class="descname">get_db_version</code><span class="sig-paren">(</span><em>ensure=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_db_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_db_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_fpath">
<code class="descname">get_fpath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_fpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_fpath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_metadata_items">
<code class="descname">get_metadata_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_metadata_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_metadata_items" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">metadata_items</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –exec-get_metadata_items</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()[</span><span class="s1">&#39;notch&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metadata_items</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_metadata_items</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;metadata_items = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">metadata_items</span><span class="p">)),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_metadata_val">
<code class="descname">get_metadata_val</code><span class="sig-paren">(</span><em>key</em>, <em>eval_=False</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_metadata_val"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_metadata_val" title="Permalink to this definition">¶</a></dt>
<dd><p>val is the repr string unless <a href="#id7"><span class="problematic" id="id8">eval_</span></a> is true</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_row_count">
<code class="descname">get_row_count</code><span class="sig-paren">(</span><em>tblname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_row_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_row_count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_rowid_from_superkey">
<code class="descname">get_rowid_from_superkey</code><span class="sig-paren">(</span><em>tblname</em>, <em>params_iter=None</em>, <em>superkey_colnames=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_rowid_from_superkey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_rowid_from_superkey" title="Permalink to this definition">¶</a></dt>
<dd><p>getter which uses the constrained superkeys instead of rowids</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_schema_current_autogeneration_str">
<code class="descname">get_schema_current_autogeneration_str</code><span class="sig-paren">(</span><em>autogen_cmd=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_schema_current_autogeneration_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_schema_current_autogeneration_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience: Autogenerates the most up-to-date database schema</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –exec-get_schema_current_autogeneration_str</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;keypoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_schema_current_autogeneration_str</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_sql_version">
<code class="descname">get_sql_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_sql_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_sql_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Conveinience</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_as_pandas">
<code class="descname">get_table_as_pandas</code><span class="sig-paren">(</span><em>tablename</em>, <em>rowids=None</em>, <em>columns=None</em>, <em>exclude_columns=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_as_pandas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_as_pandas" title="Permalink to this definition">¶</a></dt>
<dd><p>aid = 30
db = ibs.staging
rowids = ut.flatten(ibs.get_review_rowids_from_single([aid]))
tablename = ‘reviews’
exclude_columns = ‘review_user_confidence review_user_identity’.split(‘ ‘)
print(db.get_table_as_pandas(tablename, rowids, exclude_columns=exclude_columns))</p>
<p>db = ibs.db
rowids = ut.flatten(ibs.get_annotmatch_rowids_from_aid([aid]))
tablename = ‘annotmatch’
exclude_columns = ‘annotmatch_confidence annotmatch_posixtime_modified annotmatch_reviewer’.split(‘ ‘)
print(db.get_table_as_pandas(tablename, rowids, exclude_columns=exclude_columns))</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_autogen_dict">
<code class="descname">get_table_autogen_dict</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_autogen_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_autogen_dict" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tablename</strong> (<em>str</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">autogen_dict</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control get_table_autogen_dict</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">SQLDatabaseController</span><span class="p">(</span><span class="n">sqldb_fname</span><span class="o">=</span><span class="s1">&#39;:memory:&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;dummy_table&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;rowid&#39;</span><span class="p">,</span> <span class="s1">&#39;INTEGER PRIMARY KEY&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;TEXT&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;value2&#39;</span><span class="p">,</span> <span class="s1">&#39;TEXT NOT NULL&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;value3&#39;</span><span class="p">,</span> <span class="s1">&#39;TEXT DEFAULT 1&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;time_added&#39;</span><span class="p">,</span> <span class="s2">&quot;INTEGER DEFAULT (CAST(STRFTIME(&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;NOW&#39;, &#39;UTC&#39;) AS INTEGER))&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">autogen_dict</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_autogen_dict</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">autogen_dict</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_autogen_str">
<code class="descname">get_table_autogen_str</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_autogen_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_autogen_str" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tablename</strong> (<em>str</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">quoted_docstr</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control get_table_autogen_str</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">SQLDatabaseController</span><span class="p">(</span><span class="n">sqldb_fname</span><span class="o">=</span><span class="s1">&#39;:memory:&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;dummy_table&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;rowid&#39;</span><span class="p">,</span> <span class="s1">&#39;INTEGER PRIMARY KEY&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;TEXT&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="s1">&#39;time_added&#39;</span><span class="p">,</span> <span class="s2">&quot;INTEGER DEFAULT (CAST(STRFTIME(&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;NOW&#39;, &#39;UTC&#39;) AS INTEGER))&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">get_table_autogen_str</span><span class="p">(</span><span class="n">tablename</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_column_data">
<code class="descname">get_table_column_data</code><span class="sig-paren">(</span><em>tablename</em>, <em>columns=None</em>, <em>exclude_columns=[]</em>, <em>rowids=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_column_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_column_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Grabs a table of information</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –test-get_table_column_data</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;keypoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">column_list</span><span class="p">,</span> <span class="n">column_names</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_column_data</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_constraints">
<code class="descname">get_table_constraints</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_constraints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_constraints" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO: use coldef_list with table_autogen_dict instead</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_csv">
<code class="descname">get_table_csv</code><span class="sig-paren">(</span><em>tablename</em>, <em>exclude_columns=[]</em>, <em>rowids=None</em>, <em>truncate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a tablename to csv format</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tablename</strong> (<em>str</em>) – </li>
<li><strong>exclude_columns</strong> (<em>list</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">csv_table</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –test-get_table_csv
python -m dtool.sql_control –exec-get_table_csv –tablename=contributors</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">clear_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;notch&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;notch&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ut</span><span class="o">.</span><span class="n">exec_funckw</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">get_table_csv</span><span class="p">,</span> <span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;notch&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">csv_table</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_csv</span><span class="p">(</span><span class="n">tablename</span><span class="p">,</span> <span class="n">exclude_columns</span><span class="p">,</span> <span class="n">truncate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">csv_table</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_csv_header">
<code class="descname">get_table_csv_header</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_csv_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_csv_header" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_docstr">
<code class="descname">get_table_docstr</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_docstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_docstr" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –exec-get_table_docstr</dd>
<dt>Example0:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;keypoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_docstr</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">Used to store individual chip features (ellipses)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_names">
<code class="descname">get_table_names</code><span class="sig-paren">(</span><em>lazy=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Conveinience:</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_new_transferdata">
<code class="descname">get_table_new_transferdata</code><span class="sig-paren">(</span><em>tablename</em>, <em>exclude_columns=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_new_transferdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_new_transferdata" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –test-get_table_column_data
python -m dtool.sql_control –test-get_table_new_transferdata
python -m dtool.sql_control –test-get_table_new_transferdata:1</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;keypoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename_list</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_names</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colrichinfo_list</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_columns</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">tablename</span> <span class="ow">in</span> <span class="n">tablename_list</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">new_transferdata</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_new_transferdata</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">column_list</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span> <span class="n">extern_colx_list</span><span class="p">,</span> <span class="n">extern_superkey_colname_list</span><span class="p">,</span> <span class="n">extern_superkey_colval_list</span><span class="p">,</span> <span class="n">extern_tablename_list</span><span class="p">,</span> <span class="n">extern_primarycolnames_list</span> <span class="o">=</span> <span class="n">new_transferdata</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;tablename = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tablename</span><span class="p">,))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;colnames = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">column_names</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extern_colx_list = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">extern_colx_list</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extern_superkey_colname_list = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">extern_superkey_colname_list</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;L___&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># SLOW_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(module:wbia)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">wbia</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s1">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exclude_columns</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename_list</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">get_table_names</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">tablename</span> <span class="ow">in</span> <span class="n">tablename_list</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">new_transferdata</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_new_transferdata</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">column_list</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span> <span class="n">extern_colx_list</span><span class="p">,</span> <span class="n">extern_superkey_colname_list</span><span class="p">,</span> <span class="n">extern_superkey_colval_list</span><span class="p">,</span> <span class="n">extern_tablename_list</span><span class="p">,</span> <span class="n">extern_primarycolnames_list</span> <span class="o">=</span> <span class="n">new_transferdata</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;tablename = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tablename</span><span class="p">,))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;colnames = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">column_names</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extern_colx_list = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">extern_colx_list</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extern_superkey_colname_list = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">extern_superkey_colname_list</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;L___&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># SLOW_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(module:wbia)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs</span> <span class="o">=</span> <span class="n">wbia</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="s1">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exclude_columns</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">const</span><span class="o">.</span><span class="n">IMAGE_TABLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_transferdata</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_new_transferdata</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">column_list</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span> <span class="n">extern_colx_list</span><span class="p">,</span> <span class="n">extern_superkey_colname_list</span><span class="p">,</span> <span class="n">extern_superkey_colval_list</span><span class="p">,</span> <span class="n">extern_tablename_list</span><span class="p">,</span> <span class="n">extern_primarycolnames_list</span> <span class="o">=</span> <span class="n">new_transferdata</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dependsmap</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_metadata_val</span><span class="p">(</span><span class="n">tablename</span> <span class="o">+</span> <span class="s1">&#39;_dependsmap&#39;</span><span class="p">,</span> <span class="n">eval_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;tablename = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tablename</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;colnames = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">column_names</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extern_colx_list = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">extern_colx_list</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extern_superkey_colname_list = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">extern_superkey_colname_list</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;dependsmap = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">dependsmap</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;L___&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="n">ibs</span><span class="o">.</span><span class="n">const</span><span class="o">.</span><span class="n">ANNOTATION_TABLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_transferdata</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_new_transferdata</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">column_list</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span> <span class="n">extern_colx_list</span><span class="p">,</span> <span class="n">extern_superkey_colname_list</span><span class="p">,</span> <span class="n">extern_superkey_colval_list</span><span class="p">,</span> <span class="n">extern_tablename_list</span><span class="p">,</span> <span class="n">extern_primarycolnames_list</span> <span class="o">=</span> <span class="n">new_transferdata</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dependsmap</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_metadata_val</span><span class="p">(</span><span class="n">tablename</span> <span class="o">+</span> <span class="s1">&#39;_dependsmap&#39;</span><span class="p">,</span> <span class="n">eval_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;tablename = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tablename</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;colnames = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">column_names</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extern_colx_list = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">extern_colx_list</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extern_superkey_colname_list = &#39;</span> <span class="o">+</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">extern_superkey_colname_list</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;dependsmap = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">dependsmap</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;L___&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_primarykey_colnames">
<code class="descname">get_table_primarykey_colnames</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_primarykey_colnames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_primarykey_colnames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_table_superkey_colnames">
<code class="descname">get_table_superkey_colnames</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_table_superkey_colnames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_table_superkey_colnames" title="Permalink to this definition">¶</a></dt>
<dd><p>Actually resturns a list of tuples. need to change the name to
get_table_superkey_colnames_list</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tablename</strong> (<em>str</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">superkeys</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –test-get_table_superkey_colnames
python -m wbia –tf get_table_superkey_colnames –tablename=contributors
python -m wbia –tf get_table_superkey_colnames –db PZ_Master0 –tablename=annotations
python -m wbia –tf get_table_superkey_colnames –db PZ_Master0 –tablename=contributors  # NOQA</dd>
<dt>Example0:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;chip&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">superkeys</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_table_superkey_colnames</span><span class="p">(</span><span class="s1">&#39;chip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">superkeys</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">[(&#39;dummy_annot_rowid&#39;, &#39;config_rowid&#39;)]</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_where">
<code class="descname">get_where</code><span class="sig-paren">(</span><em>tblname</em>, <em>colnames</em>, <em>params_iter</em>, <em>where_clause</em>, <em>unpack_scalars=True</em>, <em>eager=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_where"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_where" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_where_eq">
<code class="descname">get_where_eq</code><span class="sig-paren">(</span><em>tblname</em>, <em>colnames</em>, <em>params_iter</em>, <em>where_colnames</em>, <em>unpack_scalars=True</em>, <em>eager=True</em>, <em>op='AND'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_where_eq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_where_eq" title="Permalink to this definition">¶</a></dt>
<dd><p>hacked in function for nicer templates</p>
<p>unpack_scalars = True
kwargs = {}</p>
<dl class="docutils">
<dt>Kwargs:</dt>
<dd>verbose:</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.get_where_eq_set">
<code class="descname">get_where_eq_set</code><span class="sig-paren">(</span><em>tblname</em>, <em>colnames</em>, <em>params_iter</em>, <em>where_colnames</em>, <em>unpack_scalars=True</em>, <em>eager=True</em>, <em>op='AND'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.get_where_eq_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.get_where_eq_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.has_table">
<code class="descname">has_table</code><span class="sig-paren">(</span><em>tablename</em>, <em>colnames=None</em>, <em>lazy=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.has_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.has_table" title="Permalink to this definition">¶</a></dt>
<dd><p>checks if a table exists</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.integrity">
<code class="descname">integrity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.integrity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.integrity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.make_json_table_definition">
<code class="descname">make_json_table_definition</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.make_json_table_definition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.make_json_table_definition" title="Permalink to this definition">¶</a></dt>
<dd><p>VERY HACKY FUNC RIGHT NOW. NEED TO FIX LATER</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tablename</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">new_transferdata</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">?</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m wbia –tf sql_control.make_json_table_definition</dd>
<dt>CommandLine:</dt>
<dd>python -m utool –tf iter_module_doctestable –modname=dtool.sql_control
–include_inherited=True
python -m dtool.sql_control –exec-make_json_table_definition</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tablename</span> <span class="o">=</span> <span class="s1">&#39;keypoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table_def</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">make_json_table_definition</span><span class="p">(</span><span class="n">tablename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;table_def = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr2</span><span class="p">(</span><span class="n">table_def</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">True</span><span class="p">),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">table_def = {</span>
<span class="go">    &#39;keypoint_rowid&#39;: &#39;INTEGER&#39;,</span>
<span class="go">    &#39;chip_rowid&#39;: &#39;INTEGER&#39;,</span>
<span class="go">    &#39;config_rowid&#39;: &#39;INTEGER&#39;,</span>
<span class="go">    &#39;kpts&#39;: &#39;NDARRAY&#39;,</span>
<span class="go">    &#39;num&#39;: &#39;INTEGER&#39;,</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.merge_databases_new">
<code class="descname">merge_databases_new</code><span class="sig-paren">(</span><em>db_src</em>, <em>ignore_tables=None</em>, <em>rowid_subsets=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.merge_databases_new"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.merge_databases_new" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies over all non-rowid properties into another sql table. handles
annotated dependenceis.
Does not handle external files
Could handle dependency tree order, but not yet implemented.</p>
<p>FINISHME</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>db_src</strong> (<em>SQLController</em>) – merge data from db_src into db</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control –test-merge_databases_new:0
python -m dtool.sql_control –test-merge_databases_new:2</dd>
<dt>Example0:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(module:wbia)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#ibs_dst = wbia.opendb(dbdir=&#39;testdb_dst&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_src</span> <span class="o">=</span> <span class="n">wbia</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;testdb1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># OPEN A CLEAN DATABASE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_dst</span> <span class="o">=</span> <span class="n">wbia</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="n">dbdir</span><span class="o">=</span><span class="s1">&#39;test_sql_merge_dst1&#39;</span><span class="p">,</span> <span class="n">allow_newdir</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delete_ibsdir</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_src</span><span class="o">.</span><span class="n">ensure_contributor_rowids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># build test data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">ibs_dst</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db_src</span> <span class="o">=</span> <span class="n">ibs_src</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowid_subsets</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># execute function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">merge_databases_new</span><span class="p">(</span><span class="n">db_src</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Example1:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(module:wbia)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_src</span> <span class="o">=</span> <span class="n">wbia</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;testdb2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># OPEN A CLEAN DATABASE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_dst</span> <span class="o">=</span> <span class="n">wbia</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="n">dbdir</span><span class="o">=</span><span class="s1">&#39;test_sql_merge_dst2&#39;</span><span class="p">,</span> <span class="n">allow_newdir</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delete_ibsdir</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_src</span><span class="o">.</span><span class="n">ensure_contributor_rowids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># build test data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">ibs_dst</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db_src</span> <span class="o">=</span> <span class="n">ibs_src</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ignore_tables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;lblannot&#39;</span><span class="p">,</span> <span class="s1">&#39;lblimage&#39;</span><span class="p">,</span> <span class="s1">&#39;image_lblimage_relationship&#39;</span><span class="p">,</span> <span class="s1">&#39;annotation_lblannot_relationship&#39;</span><span class="p">,</span> <span class="s1">&#39;keys&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowid_subsets</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># execute function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">merge_databases_new</span><span class="p">(</span><span class="n">db_src</span><span class="p">,</span> <span class="n">ignore_tables</span><span class="o">=</span><span class="n">ignore_tables</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Example2:</dt>
<dd><div class="first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># xdoctest: +REQUIRES(module:wbia)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.sql_control</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">wbia</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_src</span> <span class="o">=</span> <span class="n">wbia</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s1">&#39;testdb2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># OPEN A CLEAN DATABASE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_src</span><span class="o">.</span><span class="n">fix_invalid_annotmatches</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_dst</span> <span class="o">=</span> <span class="n">wbia</span><span class="o">.</span><span class="n">opendb</span><span class="p">(</span><span class="n">dbdir</span><span class="o">=</span><span class="s1">&#39;test_sql_subexport_dst2&#39;</span><span class="p">,</span> <span class="n">allow_newdir</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delete_ibsdir</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ibs_src</span><span class="o">.</span><span class="n">ensure_contributor_rowids</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># build test data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">ibs_dst</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db_src</span> <span class="o">=</span> <span class="n">ibs_src</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ignore_tables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;lblannot&#39;</span><span class="p">,</span> <span class="s1">&#39;lblimage&#39;</span><span class="p">,</span> <span class="s1">&#39;image_lblimage_relationship&#39;</span><span class="p">,</span> <span class="s1">&#39;annotation_lblannot_relationship&#39;</span><span class="p">,</span> <span class="s1">&#39;keys&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># execute function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aid_subset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowid_subsets</span> <span class="o">=</span> <span class="p">{</span><span class="n">ANNOTATION_TABLE</span><span class="p">:</span> <span class="n">aid_subset</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">NAME_TABLE</span><span class="p">:</span> <span class="n">ibs_src</span><span class="o">.</span><span class="n">get_annot_nids</span><span class="p">(</span><span class="n">aid_subset</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="n">IMAGE_TABLE</span><span class="p">:</span> <span class="n">ibs_src</span><span class="o">.</span><span class="n">get_annot_gids</span><span class="p">(</span><span class="n">aid_subset</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="n">ANNOTMATCH_TABLE</span><span class="p">:</span> <span class="p">[],</span>
<span class="gp">... </span>                 <span class="n">GSG_RELATION_TABLE</span><span class="p">:</span> <span class="p">[],</span>
<span class="gp">... </span>                 <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">merge_databases_new</span><span class="p">(</span><span class="n">db_src</span><span class="p">,</span> <span class="n">ignore_tables</span><span class="o">=</span><span class="n">ignore_tables</span><span class="p">,</span> <span class="n">rowid_subsets</span><span class="o">=</span><span class="n">rowid_subsets</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.modify_table">
<code class="descname">modify_table</code><span class="sig-paren">(</span><em>tablename=None</em>, <em>colmap_list=None</em>, <em>tablename_new=None</em>, <em>drop_columns=[]</em>, <em>add_columns=[]</em>, <em>rename_columns=[]</em>, <em>**metadata_keyval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.modify_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.modify_table" title="Permalink to this definition">¶</a></dt>
<dd><p>function to modify the schema - only columns that are being added,
removed or changed need to be enumerated</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tablename</strong> (<em>str</em>) – tablename</li>
<li><strong>colmap_list</strong> (<em>list</em>) – of tuples (orig_colname, new_colname, new_coltype, convert_func)
orig_colname - the original name of the column, None to append, int for index
new_colname - the new column name (‘’ for same, None to delete)
new_coltype - New Column Type. None to use data unmodified
convert_func - Function to convert data from old to new</li>
<li><strong>constraint</strong> (<em>str</em>) – </li>
<li><strong>superkeys</strong> (<em>list</em>) – </li>
<li><strong>docstr</strong> (<em>str</em>) – </li>
<li><strong>tablename_new</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">loc_zip_map</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">modify_table</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">CONTRIBUTOR_TABLE</span><span class="p">,</span> <span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># orig_colname,             new_colname,      new_coltype, convert_func</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># a non-needed, but correct mapping (identity function)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">(</span><span class="s1">&#39;contrib_rowid&#39;</span><span class="p">,</span>      <span class="s1">&#39;&#39;</span><span class="p">,</span>                    <span class="s1">&#39;&#39;</span><span class="p">,</span>               <span class="kc">None</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># for new columns, function is ignored (TYPE CANNOT BE EMPTY IF ADDING)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">(</span><span class="kc">None</span><span class="p">,</span>                 <span class="s1">&#39;contrib_loc_address&#39;</span><span class="p">,</span> <span class="s1">&#39;TEXT&#39;</span><span class="p">,</span>           <span class="kc">None</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># adding a new column at index 4 (if index is invalid, None is used)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">(</span><span class="mi">4</span><span class="p">,</span>                    <span class="s1">&#39;contrib_loc_address&#39;</span><span class="p">,</span> <span class="s1">&#39;TEXT&#39;</span><span class="p">,</span>           <span class="kc">None</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># for deleted columns, type and function are ignored</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">(</span><span class="s1">&#39;contrib_loc_city&#39;</span><span class="p">,</span>    <span class="kc">None</span><span class="p">,</span>                 <span class="s1">&#39;&#39;</span><span class="p">,</span>               <span class="kc">None</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># for renamed columns, type and function are ignored</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">(</span><span class="s1">&#39;contrib_loc_city&#39;</span><span class="p">,</span>   <span class="s1">&#39;contrib_loc_town&#39;</span><span class="p">,</span>    <span class="s1">&#39;&#39;</span><span class="p">,</span>       <span class="kc">None</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">(</span><span class="s1">&#39;contrib_loc_zip&#39;</span><span class="p">,</span>    <span class="s1">&#39;contrib_loc_zip&#39;</span><span class="p">,</span>     <span class="s1">&#39;TEXT&#39;</span><span class="p">,</span>   <span class="n">loc_zip_map</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># type not changing, only NOT NULL provision</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">(</span><span class="s1">&#39;contrib_loc_country&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>                   <span class="s1">&#39;TEXT NOT NULL&#39;</span><span class="p">,</span>  <span class="kc">None</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">superkeys</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;contributor_rowid&#39;</span><span class="p">,)],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">constraint</span><span class="o">=</span><span class="p">[],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">docstr</span><span class="o">=</span><span class="s1">&#39;Used to store the contributors to the project&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.optimize">
<code class="descname">optimize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.optimize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.optimize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.print_dbg_schema">
<code class="descname">print_dbg_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.print_dbg_schema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.print_dbg_schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.print_schema">
<code class="descname">print_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.print_schema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.print_schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.print_table_csv">
<code class="descname">print_table_csv</code><span class="sig-paren">(</span><em>tablename</em>, <em>exclude_columns=[]</em>, <em>truncate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.print_table_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.print_table_csv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.reboot">
<code class="descname">reboot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.reboot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.reboot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.rename_table">
<code class="descname">rename_table</code><span class="sig-paren">(</span><em>tablename_old</em>, <em>tablename_new</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.rename_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.rename_table" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.rows_exist">
<code class="descname">rows_exist</code><span class="sig-paren">(</span><em>tblname</em>, <em>rowids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.rows_exist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.rows_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if rowids exist. Yields True if they do</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>tblname</em>, <em>colnames</em>, <em>val_iter</em>, <em>id_iter</em>, <em>id_colname='rowid'</em>, <em>duplicate_behavior='error'</em>, <em>duplcate_auto_resolve=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.set" title="Permalink to this definition">¶</a></dt>
<dd><p>setter</p>
<dl class="docutils">
<dt>CommandLine:</dt>
<dd>python -m dtool.sql_control set</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># ENABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">wbia.dtool.example_depcache</span> <span class="k">import</span> <span class="n">testdata_depc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span> <span class="o">=</span> <span class="n">testdata_depc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">clear_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowids</span> <span class="o">=</span> <span class="n">depc</span><span class="o">.</span><span class="n">get_rowids</span><span class="p">(</span><span class="s1">&#39;notch&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">depc</span><span class="p">[</span><span class="s1">&#39;notch&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">db</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span><span class="o">.</span><span class="n">print_csv</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Break things to test set</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colnames</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;dummy_annot_rowid&#39;</span><span class="p">,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">val_iter</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9003</span><span class="p">,</span> <span class="mi">9001</span><span class="p">,</span> <span class="mi">9002</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orig_data</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;notch&#39;</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="n">id_iter</span><span class="o">=</span><span class="n">rowids</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;notch&#39;</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="n">val_iter</span><span class="p">,</span> <span class="n">id_iter</span><span class="o">=</span><span class="n">rowids</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_data</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;notch&#39;</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="n">id_iter</span><span class="o">=</span><span class="n">rowids</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">new_data</span> <span class="o">==</span> <span class="n">val_iter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">new_data</span> <span class="o">!=</span> <span class="n">orig_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span><span class="o">.</span><span class="n">print_csv</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">depc</span><span class="o">.</span><span class="n">clear_all</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.set_db_version">
<code class="descname">set_db_version</code><span class="sig-paren">(</span><em>version</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.set_db_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.set_db_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.set_metadata_val">
<code class="descname">set_metadata_val</code><span class="sig-paren">(</span><em>key</em>, <em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.set_metadata_val"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.set_metadata_val" title="Permalink to this definition">¶</a></dt>
<dd><p>key must be given as a repr-ed string</p>
</dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.shrink_memory">
<code class="descname">shrink_memory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.shrink_memory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.shrink_memory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.squeeze">
<code class="descname">squeeze</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.squeeze"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.squeeze" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.tablenames">
<code class="descname">tablenames</code><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.tablenames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.thread_connection">
<code class="descname">thread_connection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.thread_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.thread_connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.vacuum">
<code class="descname">vacuum</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.vacuum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.vacuum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLDatabaseController.view_db_in_external_reader">
<code class="descname">view_db_in_external_reader</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLDatabaseController.view_db_in_external_reader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLDatabaseController.view_db_in_external_reader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.sql_control.SQLExecutionContext">
<em class="property">class </em><code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">SQLExecutionContext</code><span class="sig-paren">(</span><em>db</em>, <em>operation</em>, <em>nInput=None</em>, <em>auto_commit=True</em>, <em>start_transaction=False</em>, <em>keepwrap=False</em>, <em>verbose=False</em>, <em>tablename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLExecutionContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLExecutionContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Context manager for transactional database calls</p>
<p>FIXME: hash out details. I don’t think anybody who programmed this
knows what is going on here. So much for fine grained control.</p>
<dl class="docutils">
<dt>Referencs:</dt>
<dd><a class="reference external" href="http://stackoverflow.com/questions/9573768/understand-sqlite-multi-module-envs">http://stackoverflow.com/questions/9573768/understand-sqlite-multi-module-envs</a></dd>
</dl>
<dl class="method">
<dt id="wbia.dtool.sql_control.SQLExecutionContext.execute_and_generate_results">
<code class="descname">execute_and_generate_results</code><span class="sig-paren">(</span><em>params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLExecutionContext.execute_and_generate_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLExecutionContext.execute_and_generate_results" title="Permalink to this definition">¶</a></dt>
<dd><p>helper for context statment</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wbia.dtool.sql_control.SQLTable">
<em class="property">class </em><code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">SQLTable</code><span class="sig-paren">(</span><em>db</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">utool.util_dev.NiceRepr</span></code></p>
<p>convinience object for dealing with a specific table</p>
<p>table = db
table = SQLTable(db, ‘annotmatch’)</p>
<dl class="method">
<dt id="wbia.dtool.sql_control.SQLTable.as_pandas">
<code class="descname">as_pandas</code><span class="sig-paren">(</span><em>rowids=None</em>, <em>columns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLTable.as_pandas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLTable.as_pandas" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLTable.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLTable.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLTable.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLTable.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>rowids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLTable.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLTable.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLTable.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>colnames</em>, <em>id_iter</em>, <em>id_colname='rowid'</em>, <em>eager=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLTable.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLTable.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLTable.number_of_rows">
<code class="descname">number_of_rows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLTable.number_of_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLTable.number_of_rows" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLTable.rowids">
<code class="descname">rowids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#SQLTable.rowids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.SQLTable.rowids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="wbia.dtool.sql_control.SQLTable.rrr">
<code class="descname">rrr</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>reload_module=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wbia.dtool.sql_control.SQLTable.rrr" title="Permalink to this definition">¶</a></dt>
<dd><p>special class reloading function
This function is often injected as rrr of classes</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="wbia.dtool.sql_control.dev_test_new_schema_version">
<code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">dev_test_new_schema_version</code><span class="sig-paren">(</span><em>dbname</em>, <em>sqldb_dpath</em>, <em>sqldb_fname</em>, <em>version_current</em>, <em>version_next=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#dev_test_new_schema_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.dev_test_new_schema_version" title="Permalink to this definition">¶</a></dt>
<dd><p>HACK</p>
<p>hacky function to ensure that only developer sees the development schema
and only on test databases</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.sql_control.flattenize">
<code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">flattenize</code><span class="sig-paren">(</span><em>list_</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#flattenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.flattenize" title="Permalink to this definition">¶</a></dt>
<dd><p>maps flatten to a tuplized list</p>
<p>Weird function. DEPRICATE</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># DISABLE_DOCTEST</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">utool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="nb">zip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">val_list1</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">id_list1</span>  <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,),</span>     <span class="p">(</span><span class="mi">2</span><span class="p">,),</span>   <span class="p">(</span><span class="mi">3</span><span class="p">,)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_list1</span> <span class="o">=</span> <span class="n">utool</span><span class="o">.</span><span class="n">flattenize</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">val_list1</span><span class="p">,</span> <span class="n">id_list1</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">val_list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">id_list2</span>  <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,),</span>     <span class="p">(</span><span class="mi">2</span><span class="p">,),</span>   <span class="p">(</span><span class="mi">3</span><span class="p">,)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_list2</span> <span class="o">=</span> <span class="n">utool</span><span class="o">.</span><span class="n">flattenize</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">val_list2</span><span class="p">,</span> <span class="n">id_list2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">val_list3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">id_list3</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_list3</span> <span class="o">=</span> <span class="n">utool</span><span class="o">.</span><span class="n">flattenize</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">val_list3</span><span class="p">,</span> <span class="n">id_list3</span><span class="p">))</span>
</pre></div>
</div>
<p>out_list4 = list(zip(val_list3, id_list3))
%timeit utool.flattenize(zip(val_list1, id_list1))
%timeit utool.flattenize(zip(val_list2, id_list2))
%timeit utool.flattenize(zip(val_list3, id_list3))
%timeit list(zip(val_list3, id_list3))</p>
<p>100000 loops, best of 3: 14 us per loop
100000 loops, best of 3: 16.5 us per loop
100000 loops, best of 3: 18 us per loop
1000000 loops, best of 3: 1.18 us per loop</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.sql_control.get_operation_type">
<code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">get_operation_type</code><span class="sig-paren">(</span><em>operation</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#get_operation_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.get_operation_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the operation_type from an SQL operation</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.sql_control.sanitize_sql">
<code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">sanitize_sql</code><span class="sig-paren">(</span><em>db</em>, <em>tablename_</em>, <em>columns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#sanitize_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.sanitize_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Sanatizes an sql tablename and column. Use sparingly</p>
</dd></dl>

<dl class="function">
<dt id="wbia.dtool.sql_control.tuplize">
<code class="descclassname">wbia.dtool.sql_control.</code><code class="descname">tuplize</code><span class="sig-paren">(</span><em>list_</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wbia/dtool/sql_control.html#tuplize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wbia.dtool.sql_control.tuplize" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts each scalar item in a list to a dimension-1 tuple</p>
</dd></dl>

</div>
<div class="section" id="module-wbia.dtool">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-wbia.dtool" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>

        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="contents.html">wbia</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="contents.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Wild Me.

      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>

      |
      <a href="_sources/wbia.dtool.rst.txt"
          rel="nofollow">Page source</a>
    </div>




  </body>
</html>
